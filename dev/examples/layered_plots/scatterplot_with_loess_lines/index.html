<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><meta name="title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="og:title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="twitter:title" content="Scatterplot with loess lines · Deneb.jl"/><meta name="description" content="Documentation for Deneb.jl."/><meta property="og:description" content="Documentation for Deneb.jl."/><meta property="twitter:description" content="Documentation for Deneb.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-8131aa71-7b0f-430f-9a99-54cf4cf2d894.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-8131aa71-7b0f-430f-9a99-54cf4cf2d894.vega-embed details,
  #vis-8131aa71-7b0f-430f-9a99-54cf4cf2d894.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-8131aa71-7b0f-430f-9a99-54cf4cf2d894"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-8131aa71-7b0f-430f-9a99-54cf4cf2d894") {
      outputDiv = document.getElementById("vis-8131aa71-7b0f-430f-9a99-54cf4cf2d894");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":-1.4683718914569257,"B":-2.4391346011671153,"C":-1.8952589518047063},{"x":2,"A":-2.944378942413226,"B":-1.1434739996668972,"C":-2.082280488899551},{"x":3,"A":-4.6231726795422015,"B":-2.0571927034056805,"C":-4.261429995997656},{"x":4,"A":-2.5740489142432956,"B":-2.617339561849737,"C":-3.4035181510266335},{"x":5,"A":-2.4210620372791105,"B":-3.222738792940085,"C":-2.2397904273774993},{"x":6,"A":-2.8965868199299303,"B":-3.085842913833421,"C":-1.4858112065359208},{"x":7,"A":-4.2497448918675,"B":-3.8694563929256005,"C":-0.872730266954441},{"x":8,"A":-3.9485583954384254,"B":-5.012705047348984,"C":-0.17910944701449472},{"x":9,"A":-3.374548465919654,"B":-5.9191656322715644,"C":-0.443782988464263},{"x":10,"A":-3.665363191698723,"B":-6.294370589951961,"C":-0.12447499685766061},{"x":11,"A":-3.4960938869122264,"B":-7.379264496168956,"C":-0.3905009908293562},{"x":12,"A":-4.469611592131377,"B":-7.135194403525416,"C":0.9464611947091126},{"x":13,"A":-4.417871850045339,"B":-7.257664140127194,"C":2.7105495818698664},{"x":14,"A":-6.748134325891267,"B":-6.724105745367562,"C":3.3377402947182615},{"x":15,"A":-7.8452816789075674,"B":-7.827437281485235,"C":3.8714800584550595},{"x":16,"A":-7.376023934836428,"B":-6.222814119926079,"C":3.2962726115750165},{"x":17,"A":-9.790696620251309,"B":-5.398452893816316,"C":3.5528673139812366},{"x":18,"A":-9.155812357317643,"B":-5.944616909158018,"C":3.795875396634454},{"x":19,"A":-8.800556355786005,"B":-6.655330127117532,"C":3.017061482560064},{"x":20,"A":-8.15580104993186,"B":-7.427523632376976,"C":2.3885243060579606},{"x":21,"A":-10.311419637372964,"B":-7.751709725280332,"C":4.22834420495308},{"x":22,"A":-7.667769277029574,"B":-7.221861972250596,"C":3.034955552184093},{"x":23,"A":-8.659360609146747,"B":-8.280735589314958,"C":2.132345299286989},{"x":24,"A":-9.505157932937061,"B":-8.255432242285998,"C":3.0697216221671564},{"x":25,"A":-9.385881572012801,"B":-8.175292904618498,"C":3.98993451575884},{"x":26,"A":-9.287196526974874,"B":-8.123863503288941,"C":4.206851030066021},{"x":27,"A":-9.094509378835427,"B":-8.347099122880383,"C":4.552862943449929},{"x":28,"A":-9.21379984459498,"B":-5.868861372594031,"C":4.060961538494667},{"x":29,"A":-6.805432192229746,"B":-7.9790330844784405,"C":4.265866847217986},{"x":30,"A":-7.762202920566795,"B":-7.9410013748410915,"C":4.09238855595956},{"x":31,"A":-7.22706724333636,"B":-9.194815491674952,"C":4.263962663718932},{"x":32,"A":-7.875822827184403,"B":-9.035020516913349,"C":3.5764978321938967},{"x":33,"A":-7.911474944402442,"B":-8.567259598768427,"C":3.9685728445296373},{"x":34,"A":-6.648844590561021,"B":-8.907844819399966,"C":4.158716802743982},{"x":35,"A":-6.747036136130087,"B":-8.675323785941526,"C":2.7624957402696824},{"x":36,"A":-7.0988152863359115,"B":-8.193078437139082,"C":2.7550998316292468},{"x":37,"A":-6.459552420368907,"B":-6.502458962257206,"C":2.691441247380501},{"x":38,"A":-7.184138385757668,"B":-5.821638787788469,"C":2.8214931508947547},{"x":39,"A":-7.46728455012617,"B":-5.777770735169639,"C":2.362413311430644},{"x":40,"A":-8.385763193271602,"B":-6.755446730458802,"C":1.8879929053890012},{"x":41,"A":-7.953696172443567,"B":-7.2096983746488235,"C":1.518280847855534},{"x":42,"A":-8.551242476810247,"B":-8.74868149722131,"C":2.0856318817637463},{"x":43,"A":-9.62303732461729,"B":-8.399042993407084,"C":1.75159101819622},{"x":44,"A":-10.660781517131925,"B":-10.128554463482116,"C":1.5376145072693994},{"x":45,"A":-11.308351074287351,"B":-12.564220529329443,"C":1.259162173688443},{"x":46,"A":-11.896101563472724,"B":-12.176212748441545,"C":2.741202352873941},{"x":47,"A":-11.157500766956378,"B":-12.738888496087514,"C":4.225725730063104},{"x":48,"A":-9.253697056322116,"B":-12.103356430889413,"C":4.464662486734399},{"x":49,"A":-10.648384405889079,"B":-12.51816358500333,"C":2.8265889295256823},{"x":50,"A":-10.610731021389967,"B":-12.529493587139859,"C":1.7994598704229663},{"x":51,"A":-9.479414282770122,"B":-11.821900192731436,"C":2.528934763228026},{"x":52,"A":-8.16632318599356,"B":-11.689077644391816,"C":1.5455269499829236},{"x":53,"A":-6.932218850065064,"B":-11.328706813610165,"C":1.8468126393543525},{"x":54,"A":-6.76859912577491,"B":-11.085764565100447,"C":2.2589601286149517},{"x":55,"A":-9.174001011935061,"B":-10.545791281967679,"C":1.7481943328127163},{"x":56,"A":-7.629782250556627,"B":-11.05164539673808,"C":0.09460462654100521},{"x":57,"A":-5.958252799554064,"B":-12.963969694970343,"C":0.39915855458445515},{"x":58,"A":-5.154502715682057,"B":-13.577529746097614,"C":0.7444096344944322},{"x":59,"A":-4.608108341929499,"B":-14.378821581902729,"C":0.22482982603421764},{"x":60,"A":-3.1867088005181197,"B":-14.526629312310313,"C":-0.3433214269958429},{"x":61,"A":-3.4813557684912446,"B":-14.610396080147266,"C":0.5484893115018776},{"x":62,"A":-2.904371604174938,"B":-13.872491091164946,"C":-0.3379511096343131},{"x":63,"A":-1.9096836010038434,"B":-12.341619709453886,"C":-0.7813877073344258},{"x":64,"A":-1.5989775945646334,"B":-11.47559225749944,"C":-0.21950947281021982},{"x":65,"A":-2.727084045191376,"B":-11.696643629801917,"C":-0.1381895037992673},{"x":66,"A":-3.44306115696814,"B":-11.654153051513902,"C":0.14583289951699818},{"x":67,"A":-1.825943824414489,"B":-12.966525729308108,"C":0.413626631424},{"x":68,"A":-2.253661784383806,"B":-12.973345429378634,"C":-0.959622784207407},{"x":69,"A":-0.8672175235816371,"B":-13.760688151070996,"C":-0.28726963030569186},{"x":70,"A":1.9030493807438111,"B":-13.355514854164843,"C":-1.7322949671869743},{"x":71,"A":2.743660586068474,"B":-12.007287545484461,"C":-2.619985880092485},{"x":72,"A":3.2958591102351678,"B":-10.869533468836885,"C":-1.5843250391163544},{"x":73,"A":3.8704323338166153,"B":-10.827333216868519,"C":-1.901028393088969},{"x":74,"A":5.330553872587168,"B":-11.830167141717801,"C":-1.3547165706237334},{"x":75,"A":5.166007023126159,"B":-13.037972724648137,"C":-1.3290098683751586},{"x":76,"A":6.170045128116805,"B":-12.98762507138031,"C":-2.6494920068056906},{"x":77,"A":6.16432202844041,"B":-15.154715496025906,"C":-2.846279308635496},{"x":78,"A":7.350189913531803,"B":-14.581036241726645,"C":-1.9339634064655953},{"x":79,"A":8.973244725902044,"B":-16.329516152352003,"C":-1.7959861364575527},{"x":80,"A":10.990648171096241,"B":-15.798547082517903,"C":-1.3843243914926502},{"x":81,"A":9.56165638426862,"B":-16.62130851680478,"C":-3.2622582504353743},{"x":82,"A":10.187444896318622,"B":-16.388313409769317,"C":-2.5892370299065304},{"x":83,"A":9.151233005992491,"B":-15.45821512716344,"C":-1.4431949841830671},{"x":84,"A":8.31152785429625,"B":-15.519224719725907,"C":-1.9160808649064816},{"x":85,"A":7.299651610133704,"B":-14.344294914537622,"C":-0.6283713139666309},{"x":86,"A":5.641103849355757,"B":-15.064822061339624,"C":-0.6431854166721949},{"x":87,"A":5.208140176696393,"B":-13.165753433686502,"C":-0.03215793645011078},{"x":88,"A":6.185691797671916,"B":-12.799111441943403,"C":1.5727430680835788},{"x":89,"A":6.881740725857748,"B":-13.79829020285588,"C":1.009520465970298},{"x":90,"A":7.7139636647178005,"B":-13.09841924409952,"C":1.9038347736130747},{"x":91,"A":7.869940931030255,"B":-13.692874955679141,"C":2.339012353782058},{"x":92,"A":9.32600762978843,"B":-14.139479592513778,"C":1.8289438734758061},{"x":93,"A":9.829858945718708,"B":-13.168635620139817,"C":1.9962523341664689},{"x":94,"A":9.949183607034252,"B":-11.981026927828657,"C":2.365536360227158},{"x":95,"A":8.637371711241617,"B":-9.934721359716152,"C":1.2922163298524225},{"x":96,"A":9.040337594829499,"B":-10.294689412860444,"C":1.8593826279504793},{"x":97,"A":9.532958923932599,"B":-8.889713235192279,"C":0.9360498243105622},{"x":98,"A":8.675184376665516,"B":-8.512344005665868,"C":-0.017869391725439776},{"x":99,"A":6.968116242294803,"B":-8.419860008930698,"C":-0.23171653159371575},{"x":100,"A":7.315089611845567,"B":-8.10046239885904,"C":-0.7739316544994703}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Thursday 5 October 2023 20:18">Thursday 5 October 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
