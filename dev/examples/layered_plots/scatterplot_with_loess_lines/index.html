<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-4e8f0e58-68d1-4928-bbc8-edb725569c6c.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-4e8f0e58-68d1-4928-bbc8-edb725569c6c.vega-embed details,
  #vis-4e8f0e58-68d1-4928-bbc8-edb725569c6c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-4e8f0e58-68d1-4928-bbc8-edb725569c6c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-4e8f0e58-68d1-4928-bbc8-edb725569c6c") {
      outputDiv = document.getElementById("vis-4e8f0e58-68d1-4928-bbc8-edb725569c6c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":-0.5604802640096751,"B":0.17237229074012603,"C":0.48308909029358893},{"x":2,"A":0.6246303631538797,"B":-0.72205278687684,"C":0.3484503745148281},{"x":3,"A":1.2256691185878075,"B":-0.7506420701773773,"C":0.03871720315561877},{"x":4,"A":0.3934297252660529,"B":-1.0696312075970473,"C":0.009398487397386468},{"x":5,"A":1.434687729777795,"B":-2.1342556690631054,"C":1.3668493821021248},{"x":6,"A":1.0214023552677318,"B":-2.151650781607978,"C":3.049626204352756},{"x":7,"A":-0.012244596747212455,"B":-0.7080486911330933,"C":3.6843856077311434},{"x":8,"A":-0.050644039250379524,"B":-0.628547885863091,"C":3.767733900208075},{"x":9,"A":-0.990967910687381,"B":0.6583691056045559,"C":2.399222155600021},{"x":10,"A":-0.4902671145960167,"B":1.2702773828802627,"C":0.6541162621948691},{"x":11,"A":0.1505146794777492,"B":1.1361660583588788,"C":1.9073953587782224},{"x":12,"A":0.04211655648307899,"B":2.3546488921969373,"C":2.1198083487023593},{"x":13,"A":-0.7656449671056935,"B":2.377790692594586,"C":3.2246348916349543},{"x":14,"A":-2.6707139317915227,"B":2.297120847256467,"C":3.6306298974665108},{"x":15,"A":-0.21186114697189096,"B":2.887005032582452,"C":5.105388379932054},{"x":16,"A":-0.09339435358087483,"B":2.8477348637545097,"C":5.02770129175812},{"x":17,"A":1.8148703904643284,"B":2.2297870189064555,"C":3.8877090272996178},{"x":18,"A":1.8220901179189273,"B":3.584160942460255,"C":4.1954302769705665},{"x":19,"A":1.4488004557410448,"B":1.8829934273492888,"C":4.488200162503575},{"x":20,"A":0.6976571530881444,"B":0.8814331849762634,"C":5.378724317717907},{"x":21,"A":0.25008796178568404,"B":-0.6553444133438245,"C":5.049314965355473},{"x":22,"A":0.6991441665476643,"B":-1.3164697607002398,"C":2.601773459778175},{"x":23,"A":-0.2783396841442215,"B":-2.684721206084166,"C":2.2760230422491414},{"x":24,"A":-2.404690744770235,"B":-3.255452302343349,"C":2.545675549009861},{"x":25,"A":-1.61733283334057,"B":-3.2634034269938095,"C":2.3799247906344494},{"x":26,"A":-1.335484287870032,"B":-4.173324041997323,"C":1.4814736457921809},{"x":27,"A":-0.5189526396230393,"B":-4.369682115265475,"C":3.218402446288607},{"x":28,"A":-0.9540445558192612,"B":-3.7657465063977353,"C":3.0668888252882907},{"x":29,"A":-2.8260895829642894,"B":-4.853734132031679,"C":3.567320142246164},{"x":30,"A":-2.169093038216283,"B":-6.081316177494274,"C":1.7702008969041878},{"x":31,"A":0.5544478233766692,"B":-6.732644566694946,"C":0.7290062999418185},{"x":32,"A":0.8546760281378172,"B":-5.76334126045367,"C":-0.4327993468034945},{"x":33,"A":2.646196039991785,"B":-7.075624685224833,"C":-1.8057981402211738},{"x":34,"A":3.4980063673876765,"B":-6.401691535950538,"C":-3.24971841081018},{"x":35,"A":4.582117934776939,"B":-6.058196078666183,"C":-3.13433126633514},{"x":36,"A":2.2534242556716517,"B":-5.4467011095925155,"C":-3.285308045989865},{"x":37,"A":3.1733376367527883,"B":-4.939287041015719,"C":-3.8802428805547216},{"x":38,"A":3.397267042154681,"B":-3.797129701494559,"C":-4.0055429550172805},{"x":39,"A":3.6469561142916205,"B":-4.172212764784664,"C":-2.148783154831296},{"x":40,"A":3.2337166368677934,"B":-5.493236992252444,"C":-1.3603267679357782},{"x":41,"A":3.0396077518463382,"B":-5.2940037496427355,"C":0.5179204843511807},{"x":42,"A":3.7588051155089475,"B":-5.335691914612514,"C":1.758275398351951},{"x":43,"A":4.920232827978227,"B":-5.175427451005527,"C":3.0248391969858703},{"x":44,"A":5.190663408277606,"B":-5.830672793100514,"C":4.698272292942991},{"x":45,"A":3.5066302029392635,"B":-7.151616287407991,"C":6.1761808866901085},{"x":46,"A":4.587273256924851,"B":-6.08854838917211,"C":6.874988036113102},{"x":47,"A":3.955224368911511,"B":-6.482744184390475,"C":6.883911309928303},{"x":48,"A":5.2336611731932905,"B":-7.330608886764967,"C":7.236056321263287},{"x":49,"A":5.08206612754444,"B":-6.56524309215649,"C":7.55513248247537},{"x":50,"A":5.860443179663184,"B":-6.981353048980535,"C":6.435800589275509},{"x":51,"A":5.3807621608639415,"B":-7.6136390241734,"C":6.197068597213053},{"x":52,"A":3.15641966865107,"B":-7.373966159420551,"C":7.319226635296842},{"x":53,"A":3.9803652622043475,"B":-8.460244814743485,"C":8.15241563934646},{"x":54,"A":4.202778033329745,"B":-8.004603216718966,"C":9.919750228303549},{"x":55,"A":4.395768280306527,"B":-8.427300614123142,"C":11.317414738347018},{"x":56,"A":3.6034223304851722,"B":-8.299847580706885,"C":9.913375259244914},{"x":57,"A":2.677259624875591,"B":-6.5092603487049265,"C":8.767092303475662},{"x":58,"A":1.501687486289586,"B":-5.8728714620404965,"C":8.36033438860286},{"x":59,"A":2.9439234650298096,"B":-5.215190231514407,"C":9.191402921042958},{"x":60,"A":2.371168651013839,"B":-5.22117696257577,"C":8.149354236382713},{"x":61,"A":4.679656259509924,"B":-4.917254626128955,"C":10.15428690688409},{"x":62,"A":4.921002172367581,"B":-4.519281285330136,"C":9.842084833861989},{"x":63,"A":5.2090616857464465,"B":-3.4622965304007995,"C":9.294774261962354},{"x":64,"A":5.085950367079905,"B":-4.633869713067516,"C":10.721647560599973},{"x":65,"A":5.89540115294448,"B":-4.80168460146592,"C":10.680552126815924},{"x":66,"A":5.738124805755989,"B":-4.766208029123103,"C":11.090988659743644},{"x":67,"A":6.417658320522225,"B":-5.256779110888862,"C":10.990457548575767},{"x":68,"A":6.551359148993088,"B":-4.924938964813213,"C":11.003106380603773},{"x":69,"A":7.303631040005731,"B":-6.217251213726257,"C":11.437543413562153},{"x":70,"A":7.697499685347873,"B":-6.519688770074328,"C":9.417796805235682},{"x":71,"A":10.556787207331672,"B":-6.550044755239578,"C":9.31139865364962},{"x":72,"A":10.535460830080106,"B":-7.667383034572069,"C":10.215608989655106},{"x":73,"A":9.304981116713309,"B":-5.739760825208856,"C":8.502557696910536},{"x":74,"A":9.72866984371573,"B":-5.838043347935947,"C":8.55267432597465},{"x":75,"A":10.770004295876847,"B":-6.432967051785894,"C":9.87900024071377},{"x":76,"A":9.966155098603876,"B":-5.736854082405097,"C":8.007724088157278},{"x":77,"A":10.629390221718051,"B":-5.744428051294328,"C":8.226376498915377},{"x":78,"A":9.796405372449911,"B":-5.353580347677817,"C":8.65678205337553},{"x":79,"A":10.224555768755348,"B":-3.8822248049640167,"C":8.180272410557354},{"x":80,"A":10.670544286890951,"B":-4.092046176154515,"C":8.206981255063829},{"x":81,"A":11.65630150856498,"B":-5.418098177936187,"C":8.06103231739564},{"x":82,"A":12.341008790894293,"B":-4.427694724024006,"C":7.468287340244368},{"x":83,"A":12.552563913475847,"B":-4.43350917825403,"C":8.915470219726211},{"x":84,"A":14.524471709609799,"B":-4.718504220908837,"C":8.646008375033256},{"x":85,"A":15.362110616875318,"B":-4.203212962280783,"C":7.3656480057834575},{"x":86,"A":15.944070797993364,"B":-2.979028750480373,"C":6.911947605641272},{"x":87,"A":15.874565855035856,"B":-2.599047997232598,"C":7.273042327805815},{"x":88,"A":15.051996240895695,"B":-1.8847319326074694,"C":8.266641706636388},{"x":89,"A":16.3495132429737,"B":-2.2699878591822458,"C":6.292878530206281},{"x":90,"A":15.94347455797208,"B":-2.510410517964758,"C":6.876942796866231},{"x":91,"A":17.39044933280923,"B":-3.323780012427442,"C":5.851709259282144},{"x":92,"A":17.678244144573334,"B":-4.56903650096712,"C":4.559925788750878},{"x":93,"A":17.679628481941695,"B":-3.739871411119403,"C":4.934659694248939},{"x":94,"A":18.069803048421107,"B":-3.5323903162838266,"C":3.869838824972434},{"x":95,"A":17.45264701719282,"B":-2.955582396959259,"C":1.3468601907483728},{"x":96,"A":17.499649578917346,"B":-3.437852015291614,"C":0.5506088896066093},{"x":97,"A":17.725885110571927,"B":-2.578442311514689,"C":0.6337433367543646},{"x":98,"A":17.170641479983313,"B":-1.4938935448557826,"C":2.0469468844773466},{"x":99,"A":18.305255838535228,"B":-0.6955274565430677,"C":1.9849034906261855},{"x":100,"A":18.219611229092838,"B":0.07820128293382575,"C":1.453069988168171}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Saturday 29 July 2023 12:29">Saturday 29 July 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
