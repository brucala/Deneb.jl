<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><meta name="title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="og:title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="twitter:title" content="Scatterplot with loess lines · Deneb.jl"/><meta name="description" content="Documentation for Deneb.jl."/><meta property="og:description" content="Documentation for Deneb.jl."/><meta property="twitter:description" content="Documentation for Deneb.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/transitiongridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../graphs/">Graphs</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-a2f5dcfa-f8ed-433d-97ca-ebdff45ef848.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-a2f5dcfa-f8ed-433d-97ca-ebdff45ef848.vega-embed details,
  #vis-a2f5dcfa-f8ed-433d-97ca-ebdff45ef848.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-a2f5dcfa-f8ed-433d-97ca-ebdff45ef848"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-a2f5dcfa-f8ed-433d-97ca-ebdff45ef848") {
      outputDiv = document.getElementById("vis-a2f5dcfa-f8ed-433d-97ca-ebdff45ef848");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":0.19978131348706227,"B":-0.016824869438908395,"C":-0.11405202632493282},{"x":2,"A":-0.534427712471593,"B":-0.7223156450476025,"C":0.05080052321494492},{"x":3,"A":-0.277514132128477,"B":-0.45450498089765023,"C":-0.271011571193374},{"x":4,"A":-0.9932620815116555,"B":-0.02512244990906328,"C":-0.5658101887391441},{"x":5,"A":-2.662787783694657,"B":-0.22160621540493622,"C":1.6382998444245243},{"x":6,"A":-2.5063357970488536,"B":1.5039040687555085,"C":1.6271991610347152},{"x":7,"A":-2.4601938004100696,"B":2.864646768586428,"C":3.0408219632173243},{"x":8,"A":-0.612323387908539,"B":2.583455317378342,"C":4.002889461424139},{"x":9,"A":1.41921693972659,"B":2.6260257293195024,"C":3.8848778164425686},{"x":10,"A":2.724680991262796,"B":1.2603397242502363,"C":4.692717866673016},{"x":11,"A":2.9758493927347898,"B":0.5845951052593634,"C":3.6304920453945138},{"x":12,"A":3.917118346770417,"B":-0.1955538550427767,"C":4.786277739138083},{"x":13,"A":5.511674683782099,"B":1.16606390904228,"C":4.559614254556358},{"x":14,"A":5.2082724971248044,"B":1.6732947926544914,"C":3.2784438119581494},{"x":15,"A":3.7250264309697236,"B":0.5752637604612372,"C":1.4601161660950501},{"x":16,"A":4.438914711415442,"B":0.014717667431612604,"C":0.6281311585354247},{"x":17,"A":2.5998788836660336,"B":0.08039984519286233,"C":1.2515394907257564},{"x":18,"A":3.5812860530885033,"B":-0.10351408983986693,"C":1.368224915911164},{"x":19,"A":3.2105350453488244,"B":-0.10952063358293876,"C":1.739562294406413},{"x":20,"A":3.387026333650293,"B":-0.006456719467555001,"C":-0.09933337953769016},{"x":21,"A":2.6836242304094617,"B":-1.4415546125166474,"C":-1.987526012825874},{"x":22,"A":4.268982127511154,"B":-1.7771615641766882,"C":-1.1868288024579088},{"x":23,"A":4.463083788570829,"B":-1.502262997748168,"C":-1.3277477851828503},{"x":24,"A":5.265024943280212,"B":-2.2462345803505914,"C":-2.075608893485991},{"x":25,"A":6.566191331045856,"B":-1.5899264417418557,"C":-0.9238511747504937},{"x":26,"A":9.016660459512645,"B":-2.2867282195565086,"C":-2.6631351837296937},{"x":27,"A":9.981737966686914,"B":-1.5229604847006428,"C":-3.0376640506444983},{"x":28,"A":9.271574658230882,"B":-2.297164994913207,"C":-3.0778715292835566},{"x":29,"A":9.024750870341457,"B":-0.9718597794782453,"C":-1.640919804385066},{"x":30,"A":8.232351362665554,"B":-0.6512511702968773,"C":-0.5118489751680791},{"x":31,"A":8.780335508188715,"B":-2.4923896350962136,"C":1.223714012623111},{"x":32,"A":7.92757770656869,"B":-4.447573652295665,"C":2.7146321161510154},{"x":33,"A":8.203394199718659,"B":-4.851275691674719,"C":2.6629761553718527},{"x":34,"A":8.158539506703494,"B":-4.459749424111062,"C":2.9133169046981005},{"x":35,"A":9.226412599767867,"B":-4.445199209191597,"C":3.978231346137004},{"x":36,"A":9.701253313773377,"B":-4.421944091449387,"C":3.651680703181689},{"x":37,"A":9.6752668413312,"B":-5.277370244394766,"C":2.91428860335205},{"x":38,"A":9.069647772638413,"B":-3.680834774613431,"C":2.4393192084725266},{"x":39,"A":8.548380445467501,"B":-5.206153285982507,"C":0.27582911639246765},{"x":40,"A":9.228857171996953,"B":-5.1506265757182135,"C":-0.2572926098885755},{"x":41,"A":10.144559545673625,"B":-5.5192867473605425,"C":-0.9550232650987844},{"x":42,"A":9.823719373009236,"B":-4.3101005464360265,"C":-0.013821445791931106},{"x":43,"A":11.761359592004544,"B":-4.194404280729265,"C":0.16632088102358944},{"x":44,"A":13.364092058878553,"B":-4.668895026893036,"C":1.0092443587521867},{"x":45,"A":14.011192398372614,"B":-4.814006320044212,"C":0.5516082015496121},{"x":46,"A":14.346533326889288,"B":-4.029489253228526,"C":1.6655547862493212},{"x":47,"A":12.699358232298762,"B":-4.468942199021553,"C":1.5772529014714447},{"x":48,"A":13.504738037641992,"B":-6.929687607817686,"C":2.26824022340719},{"x":49,"A":13.91059066035673,"B":-7.170829613261204,"C":2.857851275642926},{"x":50,"A":15.22126025493571,"B":-7.749726946930851,"C":3.970626811392322},{"x":51,"A":15.718921164293047,"B":-8.307666230117121,"C":3.9523158463265164},{"x":52,"A":14.01848808160945,"B":-7.302875668776465,"C":2.9597957333020743},{"x":53,"A":11.805182886823049,"B":-5.0939488193475855,"C":4.376386552178524},{"x":54,"A":12.01616448803089,"B":-4.8800020503902655,"C":2.6585230257730887},{"x":55,"A":10.774824250657318,"B":-4.588639129688854,"C":1.639583605675412},{"x":56,"A":10.256148277021934,"B":-4.423496860623136,"C":2.3491673327880727},{"x":57,"A":8.680905586004094,"B":-3.92102874438645,"C":2.728777962379201},{"x":58,"A":7.660914279654804,"B":-4.979864264003034,"C":2.846439954063224},{"x":59,"A":6.782579813452496,"B":-4.440105745235082,"C":2.73554451305491},{"x":60,"A":6.301339823999475,"B":-4.146023093788232,"C":3.111838148109317},{"x":61,"A":7.059026253269834,"B":-5.1853253457330615,"C":3.103288607986036},{"x":62,"A":8.162741872816069,"B":-6.432667457176799,"C":2.600752323237641},{"x":63,"A":7.964721065054058,"B":-6.490963029549456,"C":1.9189813436714156},{"x":64,"A":6.152146224009229,"B":-5.0927228845462915,"C":1.5831881330653208},{"x":65,"A":5.576319733804047,"B":-4.451192334045409,"C":2.774046695961523},{"x":66,"A":4.343254800960825,"B":-4.250418137166541,"C":5.3490922565548065},{"x":67,"A":5.001333379324084,"B":-3.8323533534375938,"C":7.392569517521766},{"x":68,"A":5.806492981474932,"B":-2.1586630105594105,"C":8.3287199757225},{"x":69,"A":2.929387693561976,"B":-2.0321069802348606,"C":8.465119643540115},{"x":70,"A":3.1625541849947876,"B":-1.8070551660872467,"C":8.618525104968827},{"x":71,"A":2.6891869117577802,"B":-0.11592905958417246,"C":8.960573735118071},{"x":72,"A":3.243157079743247,"B":0.9268594615224155,"C":8.030680069161471},{"x":73,"A":3.3038449695673777,"B":-0.707706384946952,"C":7.6894613779847205},{"x":74,"A":2.1841668925117323,"B":-0.330809864739153,"C":8.441297898046159},{"x":75,"A":1.6296095259266716,"B":0.795012751778277,"C":8.783636154339955},{"x":76,"A":0.6629250534152695,"B":1.207141392339163,"C":8.13849331846643},{"x":77,"A":1.7404870387293985,"B":0.8417002549129549,"C":7.921896464469976},{"x":78,"A":0.18709387915454043,"B":1.5751075430373023,"C":8.141668633415156},{"x":79,"A":-0.14906150930466674,"B":1.5729316855236057,"C":9.104659598756175},{"x":80,"A":-2.18444862401879,"B":1.4242993414488736,"C":9.582939130832195},{"x":81,"A":-2.4204140623684225,"B":1.8171537217136524,"C":9.203289105660152},{"x":82,"A":-2.07392821975504,"B":1.4323438927288852,"C":9.42546516131013},{"x":83,"A":-1.5706550222604097,"B":0.7720442249705567,"C":10.595096520695426},{"x":84,"A":-1.500505476572483,"B":0.23651533789586662,"C":10.31614063090655},{"x":85,"A":-2.4104827499289643,"B":0.015262282830748743,"C":9.87239363451245},{"x":86,"A":-1.7424938914978063,"B":-0.01128821737948911,"C":10.105801389040566},{"x":87,"A":-1.4685049562652384,"B":-1.8601524015823527,"C":10.337431001174718},{"x":88,"A":-1.8322306024506663,"B":-2.6733479737526054,"C":9.835133670108808},{"x":89,"A":-1.2932865287916813,"B":-2.8483506413409314,"C":9.221546664549495},{"x":90,"A":-1.8897076856021133,"B":-1.4293416449538274,"C":9.261716995591593},{"x":91,"A":-3.3208085817376296,"B":-1.4424146775371358,"C":8.84413254437234},{"x":92,"A":-2.8266978514122414,"B":-1.6175272588395402,"C":9.339182978160618},{"x":93,"A":-2.3029077118818604,"B":-0.5504914859410701,"C":8.920457748513792},{"x":94,"A":-1.7559306887661732,"B":-0.3895504468963071,"C":7.324789909985407},{"x":95,"A":-1.649063311583206,"B":-0.3376293005949115,"C":7.939391341048493},{"x":96,"A":-1.3578231712801379,"B":0.18006396096352503,"C":8.602475618579767},{"x":97,"A":-0.3658481914025703,"B":0.40906557912950303,"C":7.6309224259577455},{"x":98,"A":1.059523035589401,"B":-0.24635114878561618,"C":7.571962548225159},{"x":99,"A":-0.04816412123524652,"B":-0.14348528647571726,"C":8.531076607169213},{"x":100,"A":0.6497243767681509,"B":1.664296323251529,"C":8.685820175498991}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Monday 20 January 2025 15:01">Monday 20 January 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
