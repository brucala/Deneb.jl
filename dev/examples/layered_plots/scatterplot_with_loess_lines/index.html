<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-0330a8cc-cc29-4403-9ec3-20c70492fef3.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-0330a8cc-cc29-4403-9ec3-20c70492fef3.vega-embed details,
  #vis-0330a8cc-cc29-4403-9ec3-20c70492fef3.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-0330a8cc-cc29-4403-9ec3-20c70492fef3"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-0330a8cc-cc29-4403-9ec3-20c70492fef3") {
      outputDiv = document.getElementById("vis-0330a8cc-cc29-4403-9ec3-20c70492fef3");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":-0.8139349278773922,"B":-1.3845446147620426,"C":0.4992832989285246},{"x":2,"A":-1.0896036525792772,"B":-2.6563742300131503,"C":1.527051066510863},{"x":3,"A":-1.7488575118021434,"B":-2.417215317037239,"C":1.9893753768901528},{"x":4,"A":-1.4469692643726004,"B":-4.312666428754685,"C":1.3850094862136706},{"x":5,"A":0.44019936326603903,"B":-3.1583913407091853,"C":0.5348591526226263},{"x":6,"A":1.6117371545932515,"B":-1.8737977812684716,"C":0.6228365807904438},{"x":7,"A":2.3743192274299174,"B":-0.9680644171183809,"C":1.5562637394529246},{"x":8,"A":2.468572650665558,"B":0.42375106921229166,"C":1.4488588525762225},{"x":9,"A":3.2469392272365676,"B":0.07732369304344622,"C":1.8898838420817292},{"x":10,"A":4.324289707940927,"B":0.9801254656082543,"C":0.776526211920852},{"x":11,"A":4.3449988133937145,"B":2.52564652996722,"C":0.20362213850628536},{"x":12,"A":3.498723312217198,"B":2.9713941980387912,"C":0.7719912188156461},{"x":13,"A":4.501116618647863,"B":3.4561596707088102,"C":0.4291483260167212},{"x":14,"A":5.748764167543432,"B":4.023978925282785,"C":-0.3449282084215693},{"x":15,"A":4.503468021244672,"B":4.469508930019352,"C":0.14357841222781204},{"x":16,"A":3.920642348948543,"B":6.680842638166659,"C":-1.692625640035484},{"x":17,"A":2.9993420327993325,"B":8.076214682074351,"C":-1.7032934997018951},{"x":18,"A":2.319374348816287,"B":7.977537436721208,"C":-2.104524749308824},{"x":19,"A":1.852960367120246,"B":8.412789087926583,"C":-2.1079616041319373},{"x":20,"A":0.8972428951306581,"B":7.512212127563927,"C":-0.884125262445228},{"x":21,"A":1.5296450106625692,"B":7.981619635829537,"C":-2.4092033299547078},{"x":22,"A":1.532926339999124,"B":9.849811209628417,"C":-2.2607700905945776},{"x":23,"A":-0.13329035020242852,"B":10.916329959791558,"C":-3.2478657302603815},{"x":24,"A":1.0444065768984734,"B":10.436451958865593,"C":-4.019109140751005},{"x":25,"A":-1.0654144771364864,"B":10.096805099489258,"C":-2.6293948546642314},{"x":26,"A":-1.3808464222120493,"B":9.661793000045517,"C":-2.204873762294944},{"x":27,"A":-1.567436292383189,"B":10.023337369344823,"C":-3.3888846400724084},{"x":28,"A":-1.975417141262848,"B":9.440525882862977,"C":-2.4741559881172073},{"x":29,"A":-2.215896470975374,"B":9.619333217275795,"C":-3.4800558609071928},{"x":30,"A":-2.8779584661122133,"B":10.837670168683857,"C":-2.6398935617449912},{"x":31,"A":-2.022077536008073,"B":10.531472572676801,"C":-1.8960586077382795},{"x":32,"A":-2.3123167289885673,"B":10.078681036496368,"C":-3.3067574581351464},{"x":33,"A":-0.7044045832944876,"B":10.677061191270829,"C":-3.690867388172066},{"x":34,"A":-0.37080153979730324,"B":10.894143688231521,"C":-2.2159781550754727},{"x":35,"A":0.7151028413729621,"B":10.18481605662849,"C":-2.118186031888237},{"x":36,"A":0.43123287320241155,"B":12.477725374418808,"C":0.30960753385100964},{"x":37,"A":0.9284172969155249,"B":13.775987812929905,"C":1.853674633395844},{"x":38,"A":1.41560253718925,"B":12.177276186237986,"C":2.0184950492664995},{"x":39,"A":0.39789272807867704,"B":14.379356386677435,"C":1.7761077960719385},{"x":40,"A":0.010077050075371075,"B":13.022113751109972,"C":0.8030296766284701},{"x":41,"A":0.07182746621061553,"B":13.598745224098774,"C":3.2581992566862876},{"x":42,"A":-0.4980893406707565,"B":12.263918546876162,"C":3.8697082925997233},{"x":43,"A":0.42249106291914296,"B":12.342554962013876,"C":3.650587272252512},{"x":44,"A":0.5655012225634601,"B":12.600478270012077,"C":3.7343471133358426},{"x":45,"A":0.1806066049589694,"B":11.191619132193933,"C":2.6530441633744033},{"x":46,"A":0.525920554245501,"B":10.756626929165217,"C":4.168877460917839},{"x":47,"A":1.2835023405835562,"B":10.323934493282582,"C":4.839778296953986},{"x":48,"A":0.587093485693541,"B":10.615306732293744,"C":3.793938932206763},{"x":49,"A":-0.025635637200954742,"B":9.750504631199567,"C":2.9929681038453184},{"x":50,"A":0.7353606602627685,"B":9.232899501350436,"C":2.542459125555502},{"x":51,"A":1.7315762249641857,"B":9.325829924140352,"C":3.1054601666581254},{"x":52,"A":1.9868928575492373,"B":9.094618330205694,"C":1.4012783955376351},{"x":53,"A":3.0454340039502314,"B":9.831372969648253,"C":1.3415881117511952},{"x":54,"A":3.8058022178257813,"B":10.87515277017979,"C":1.652943007098054},{"x":55,"A":0.8800447694963498,"B":11.55084355512575,"C":0.9756630069554251},{"x":56,"A":0.008032121322436137,"B":10.055549162115435,"C":0.03826098052855881},{"x":57,"A":-0.15194909304981363,"B":9.515770454726228,"C":0.359096555187959},{"x":58,"A":-0.2452259384715023,"B":10.958363626338853,"C":1.2213808685790442},{"x":59,"A":1.254579868202277,"B":11.998158561879839,"C":2.2640132877725274},{"x":60,"A":1.3707051617891823,"B":12.528288548054363,"C":2.9874507081326906},{"x":61,"A":2.5853912686190927,"B":12.2698587631294,"C":4.377078649763138},{"x":62,"A":2.530688820136797,"B":11.584869972353996,"C":4.336996639857196},{"x":63,"A":1.8760999039185384,"B":11.064081717822651,"C":3.9947268217190417},{"x":64,"A":2.8852045960697046,"B":11.943532112689605,"C":4.212419970411324},{"x":65,"A":2.7866407515085934,"B":12.96694837087999,"C":3.7764348502850873},{"x":66,"A":4.814202976250985,"B":11.108556651883422,"C":2.449852144282864},{"x":67,"A":3.837533920378551,"B":11.957920229368332,"C":2.784902127948681},{"x":68,"A":4.194303513547488,"B":12.671356960101406,"C":1.128558329654146},{"x":69,"A":4.39944046101957,"B":11.926693967504617,"C":1.113427475407215},{"x":70,"A":4.360412847195443,"B":12.031731088935569,"C":2.4093473466310464},{"x":71,"A":3.1658931495054583,"B":12.487899519164701,"C":3.1165442246074786},{"x":72,"A":4.044567210226883,"B":13.075434053582551,"C":3.7907175785825573},{"x":73,"A":2.900477521278555,"B":13.455316804368252,"C":2.7756842380270874},{"x":74,"A":2.4871412411756184,"B":13.68798612711901,"C":1.4128519294116717},{"x":75,"A":2.7571703053249266,"B":12.421476584939253,"C":1.6296854867420716},{"x":76,"A":4.426600871471114,"B":13.365101490249483,"C":-0.01551810920126212},{"x":77,"A":5.4134782465308025,"B":13.65812884451249,"C":-1.2810240718909458},{"x":78,"A":5.536978908148344,"B":13.538047110488678,"C":-2.271762264761466},{"x":79,"A":3.1917491045007758,"B":12.117779214090527,"C":-3.367077887358702},{"x":80,"A":2.326510573727136,"B":10.783925781607696,"C":-1.4582996803275805},{"x":81,"A":1.9429778172663015,"B":10.8389383932091,"C":-1.103688585152539},{"x":82,"A":0.8130100435844523,"B":10.884566780231088,"C":-2.0763932777347334},{"x":83,"A":0.5064193827639598,"B":10.664256831464494,"C":-2.751263186777386},{"x":84,"A":1.0653974309483474,"B":10.721025296306786,"C":-1.1578821585024366},{"x":85,"A":1.5307052323959993,"B":9.746399800440363,"C":-0.22993865254326856},{"x":86,"A":0.879900345714858,"B":9.726103005982937,"C":0.19582782892987732},{"x":87,"A":0.9840357515518647,"B":9.958425321892774,"C":-0.1187590405653493},{"x":88,"A":0.9483183731370568,"B":9.12890178319871,"C":0.5108918716343944},{"x":89,"A":1.6783631144824331,"B":7.94143806188411,"C":1.3398531223587864},{"x":90,"A":0.9246647216469623,"B":7.909554932570034,"C":-0.013960906229842862},{"x":91,"A":0.7559926500895018,"B":7.555448139515573,"C":-0.5696329853315072},{"x":92,"A":0.031253888258888085,"B":9.03199071589348,"C":0.337359986584812},{"x":93,"A":-1.094721080431937,"B":6.952456648451374,"C":0.3998901597320857},{"x":94,"A":-1.8682590142958124,"B":8.748092647978304,"C":1.3806868687486962},{"x":95,"A":-2.9113053061285736,"B":9.477737144205452,"C":2.2718187460936954},{"x":96,"A":-2.8841487835639965,"B":11.003756128080907,"C":2.514566435414798},{"x":97,"A":-1.9835492608032792,"B":12.21973736578779,"C":2.7782615835352424},{"x":98,"A":-1.2453648526321852,"B":11.439479411269069,"C":3.2064727088500216},{"x":99,"A":-0.19295473762628612,"B":10.830502709513066,"C":2.214156280777995},{"x":100,"A":0.4580090791325,"B":10.081094153986516,"C":3.1133564141196586}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 24 July 2023 16:29">Monday 24 July 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
