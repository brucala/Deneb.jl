<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-e022e717-8bb5-46f5-990d-59bd5a16939c.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-e022e717-8bb5-46f5-990d-59bd5a16939c.vega-embed details,
  #vis-e022e717-8bb5-46f5-990d-59bd5a16939c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-e022e717-8bb5-46f5-990d-59bd5a16939c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-e022e717-8bb5-46f5-990d-59bd5a16939c") {
      outputDiv = document.getElementById("vis-e022e717-8bb5-46f5-990d-59bd5a16939c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":-0.2336921265523332,"B":-1.5821511133030168,"C":0.6525117273750499},{"x":2,"A":2.4445534559928364,"B":-2.53438506996081,"C":1.9573626751588442},{"x":3,"A":1.1392043832051586,"B":-1.0296061087206068,"C":2.623446625115858},{"x":4,"A":0.9207397314786937,"B":-0.062205367924415444,"C":2.4012828475230164},{"x":5,"A":-0.11449029622463627,"B":0.20432064583890774,"C":3.4327771058541097},{"x":6,"A":-0.41047281965194105,"B":0.1565249311084207,"C":3.8936861016444584},{"x":7,"A":0.3489698737562311,"B":1.3343117971125662,"C":4.243450274090963},{"x":8,"A":0.6887621470775812,"B":0.7056572078843804,"C":3.1358142086115506},{"x":9,"A":-0.34798060621928995,"B":-0.302079294400432,"C":3.2828991735554283},{"x":10,"A":-1.4123499574832736,"B":0.12285477155012359,"C":4.269892114471128},{"x":11,"A":-0.7675526492404009,"B":0.17604861215050982,"C":4.896661866556341},{"x":12,"A":0.16803241780488096,"B":-1.778045111612449,"C":4.425250858283097},{"x":13,"A":-1.00562924841349,"B":-1.982491009229879,"C":5.603216179413861},{"x":14,"A":-0.9845006077237101,"B":-2.765271279910624,"C":6.658261526667011},{"x":15,"A":-0.2901490638110066,"B":-2.703745394670327,"C":6.628755456056047},{"x":16,"A":-0.26896656918711026,"B":-3.8562590832480277,"C":5.535317529739017},{"x":17,"A":-0.2360877514226604,"B":-2.3314234485930987,"C":5.3751450432948005},{"x":18,"A":0.9869147875758332,"B":-2.832068074478423,"C":5.53847101581716},{"x":19,"A":1.4447251671421013,"B":-4.110679171858271,"C":6.101449255698926},{"x":20,"A":0.2202938188096378,"B":-4.968850878879016,"C":5.511030808369821},{"x":21,"A":-0.52833844877857,"B":-4.8546730113069,"C":5.203499285154604},{"x":22,"A":-0.5075453191133199,"B":-5.031799587695879,"C":5.326272873689418},{"x":23,"A":-0.6707875270538425,"B":-4.233005299354616,"C":5.301358321296557},{"x":24,"A":1.3586547252340582,"B":-5.727297409918455,"C":3.6673064533951627},{"x":25,"A":1.9766861328128102,"B":-3.539217141140705,"C":4.325235057185085},{"x":26,"A":1.9728439492833394,"B":-1.7060456765683567,"C":3.6776249529399743},{"x":27,"A":3.779296319955811,"B":-1.8376314744998157,"C":5.176880346178421},{"x":28,"A":4.0424538897267475,"B":-4.134634102472967,"C":6.73456691798654},{"x":29,"A":2.343280064969293,"B":-4.061445129744506,"C":7.537618748848508},{"x":30,"A":4.147894742054654,"B":-3.423782136478296,"C":8.480010461690076},{"x":31,"A":3.53160903585737,"B":-2.3854147932292182,"C":9.614223500020149},{"x":32,"A":3.1168071661552745,"B":-3.169999354343307,"C":9.36999674382238},{"x":33,"A":2.3537115366842216,"B":-3.1065698562984454,"C":9.326870615717345},{"x":34,"A":-0.5219381961270059,"B":-2.9026997074214993,"C":9.41320283964911},{"x":35,"A":0.058349741840255515,"B":-2.350948345190763,"C":9.382146261173895},{"x":36,"A":-1.7780795208031852,"B":-0.26084331998935184,"C":11.303353174699152},{"x":37,"A":-0.1205767772364498,"B":-1.938381245501531,"C":10.528167157878897},{"x":38,"A":-1.5789879511165328,"B":-2.085625972821852,"C":10.189617207149908},{"x":39,"A":-2.640171110692703,"B":-0.4651963017554608,"C":9.433627189761408},{"x":40,"A":-4.78084960685507,"B":-0.158064916792088,"C":8.05370518951538},{"x":41,"A":-5.175913963880221,"B":-1.5146171421780117,"C":10.093229766425786},{"x":42,"A":-5.413414353028309,"B":-1.4086978371716115,"C":10.827965299774002},{"x":43,"A":-6.476902451915165,"B":-2.489083273850351,"C":10.361746701841472},{"x":44,"A":-7.173006502748571,"B":-1.2630248430400433,"C":13.50436873165791},{"x":45,"A":-5.760727496462659,"B":-1.5544382608225416,"C":11.542665335953064},{"x":46,"A":-4.63374288199173,"B":-2.528681883564598,"C":10.70492273750627},{"x":47,"A":-5.307575201962076,"B":-1.6065295731967821,"C":10.248667029996378},{"x":48,"A":-2.876024297878785,"B":-2.1887931201930755,"C":10.338471145319568},{"x":49,"A":-3.0103733064381806,"B":-3.35687316792296,"C":8.833631146798693},{"x":50,"A":-3.366800609045899,"B":-4.075079147770575,"C":9.084177641935916},{"x":51,"A":-4.780553301838103,"B":-2.373659064125569,"C":9.297315848049077},{"x":52,"A":-4.9592334762583095,"B":-1.8697541065212238,"C":10.54196736599759},{"x":53,"A":-5.397187213160044,"B":-3.011115854436144,"C":12.806110234384006},{"x":54,"A":-4.481383602974454,"B":-3.2121380218310547,"C":12.02473290860558},{"x":55,"A":-3.5290415961629162,"B":-3.779265830662048,"C":12.827032323982227},{"x":56,"A":-3.4771810332255146,"B":-3.433546668735362,"C":11.440240323761826},{"x":57,"A":-2.0886920197834375,"B":-3.551342764910277,"C":11.078017084001493},{"x":58,"A":-1.0092859279829998,"B":-3.8976217954478343,"C":11.091612303072528},{"x":59,"A":-0.6166178775606795,"B":-4.555722772867012,"C":11.57668260511266},{"x":60,"A":0.5130709169126003,"B":-7.212240281445727,"C":11.49988183336536},{"x":61,"A":-0.36138334938406946,"B":-6.605404542315977,"C":12.936781660937642},{"x":62,"A":0.1392162628228679,"B":-6.106013995462044,"C":12.445138134124665},{"x":63,"A":1.2710213804791832,"B":-6.134998666006885,"C":11.681935879321973},{"x":64,"A":2.2584647522552195,"B":-7.378942895014479,"C":9.61063706210748},{"x":65,"A":3.402970625023825,"B":-7.983190753416274,"C":11.13632634385238},{"x":66,"A":1.0579625276206583,"B":-9.443492545434902,"C":10.800925711555907},{"x":67,"A":0.8085567452514587,"B":-10.609173368986314,"C":12.93576885461702},{"x":68,"A":0.6830439735972115,"B":-8.71444630602242,"C":14.918066029100899},{"x":69,"A":1.3763537485853272,"B":-9.225277745634278,"C":14.659398641038777},{"x":70,"A":1.365238359172337,"B":-7.664271763094899,"C":15.03703482413442},{"x":71,"A":0.9075821295645293,"B":-6.2353072140418995,"C":15.575990333942006},{"x":72,"A":1.373640385563331,"B":-5.5678532118054775,"C":14.789520891348875},{"x":73,"A":1.3098350612761223,"B":-5.346644565483707,"C":14.404063662043525},{"x":74,"A":2.029685344368927,"B":-4.441326337052079,"C":15.337142068383548},{"x":75,"A":3.010608049351769,"B":-3.9026645750141946,"C":15.210375284578102},{"x":76,"A":2.0939351197609684,"B":-1.703485039663014,"C":15.965704065313005},{"x":77,"A":3.0943938735707657,"B":-3.119175325962394,"C":16.1360480901008},{"x":78,"A":3.7531758982304715,"B":-3.4737601218131693,"C":15.953367188582412},{"x":79,"A":2.8803647511040746,"B":-5.777374642555111,"C":16.516356864137883},{"x":80,"A":3.778093059861948,"B":-5.254015295127852,"C":16.916850824012478},{"x":81,"A":2.213567467751877,"B":-5.053467200877043,"C":17.054324032106003},{"x":82,"A":2.8178763803287286,"B":-3.5101025541487134,"C":15.593267843803002},{"x":83,"A":2.9061248340093804,"B":-3.244903246194541,"C":16.96675875314282},{"x":84,"A":2.6259399040022133,"B":-4.757968348569033,"C":16.673689299785828},{"x":85,"A":4.309743540292197,"B":-4.2441609412164105,"C":14.833603834896467},{"x":86,"A":7.109723962919353,"B":-5.197728382112394,"C":13.257712436365221},{"x":87,"A":8.875670821803341,"B":-4.920182350925397,"C":13.114544777743603},{"x":88,"A":10.272076295029159,"B":-5.607942686108313,"C":13.83787183412285},{"x":89,"A":10.54329764916661,"B":-4.977484950682031,"C":13.497564591168986},{"x":90,"A":10.61892453301194,"B":-5.604417053262862,"C":14.089459091029322},{"x":91,"A":10.164041860756367,"B":-5.539497199822732,"C":13.96205747775478},{"x":92,"A":11.467262899479525,"B":-6.736601681605844,"C":14.265328742383362},{"x":93,"A":11.716958876738063,"B":-8.355339760049725,"C":15.178714624490297},{"x":94,"A":10.335977816445519,"B":-8.938487142196296,"C":13.179183236844162},{"x":95,"A":10.672708053917212,"B":-9.921598385643748,"C":11.276752831199873},{"x":96,"A":10.634891424050666,"B":-10.985741422454865,"C":9.900493565475006},{"x":97,"A":9.461250712522572,"B":-9.960455914663804,"C":8.591216788845994},{"x":98,"A":9.736451127207872,"B":-9.04517957679655,"C":7.178866160582434},{"x":99,"A":9.169316205467704,"B":-11.415066181963201,"C":7.926635153849275},{"x":100,"A":8.544616356649113,"B":-13.05391326328214,"C":6.9958967880172835}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 24 July 2023 15:45">Monday 24 July 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
