<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><meta name="title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="og:title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="twitter:title" content="Scatterplot with loess lines · Deneb.jl"/><meta name="description" content="Documentation for Deneb.jl."/><meta property="og:description" content="Documentation for Deneb.jl."/><meta property="twitter:description" content="Documentation for Deneb.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/transitiongridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../graphs/">Graphs</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-b273b48d-783b-44df-964f-2be599317153.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-b273b48d-783b-44df-964f-2be599317153.vega-embed details,
  #vis-b273b48d-783b-44df-964f-2be599317153.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-b273b48d-783b-44df-964f-2be599317153"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-b273b48d-783b-44df-964f-2be599317153") {
      outputDiv = document.getElementById("vis-b273b48d-783b-44df-964f-2be599317153");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":1.360125062012554,"B":-1.0094851866842967,"C":2.326528766416471},{"x":2,"A":2.761297019689743,"B":-0.1996043612284929,"C":2.076022035679205},{"x":3,"A":1.9340382062442325,"B":-1.2692486111427783,"C":1.801371745157159},{"x":4,"A":1.2794426363784985,"B":-2.1527471685248,"C":2.4269687482424085},{"x":5,"A":2.684914231264387,"B":-1.871664521400177,"C":3.0378592799777246},{"x":6,"A":3.7009284846467025,"B":-1.5245227144683346,"C":1.3261397544422602},{"x":7,"A":5.4286367965650975,"B":-0.7062700050596863,"C":1.1204098201473116},{"x":8,"A":6.825842621370524,"B":-0.6825436518055359,"C":1.355487760922267},{"x":9,"A":6.961040978137289,"B":0.2658062425473855,"C":2.8909868429786654},{"x":10,"A":6.497059187522823,"B":0.8523586113236266,"C":1.851930407717509},{"x":11,"A":4.5248804909869556,"B":-0.9996448873626538,"C":1.5398220951103396},{"x":12,"A":4.017729607407214,"B":0.10715713810916472,"C":0.43393855754451494},{"x":13,"A":3.6352661095345304,"B":0.7594051589311941,"C":0.7134097254789531},{"x":14,"A":3.2106896653224086,"B":1.2467470541002599,"C":0.10034527335196142},{"x":15,"A":2.16466135251303,"B":3.1887473560382467,"C":0.5630625409982657},{"x":16,"A":4.8490063710496685,"B":3.6858757631913233,"C":-0.07511381938941897},{"x":17,"A":4.576091571989815,"B":1.9676861965867976,"C":0.36509309747091345},{"x":18,"A":5.620959891479737,"B":1.1175879407015374,"C":1.2475693593402974},{"x":19,"A":6.8353864958100985,"B":0.286361569017866,"C":0.12318380333755252},{"x":20,"A":7.573476322158282,"B":1.0582283691740955,"C":-0.5372358264814223},{"x":21,"A":7.792255074243761,"B":1.300372568570964,"C":0.3868808497168321},{"x":22,"A":6.877123648619497,"B":-0.14617850361565865,"C":-0.13427569471088363},{"x":23,"A":5.1061613733421884,"B":-1.4217610954091322,"C":-0.5385699941964766},{"x":24,"A":6.448180261046257,"B":0.5363529118457115,"C":-0.8179713034286658},{"x":25,"A":7.397533957929311,"B":0.8101614821671739,"C":-2.339455562220882},{"x":26,"A":6.229309463338077,"B":0.9168765804543813,"C":-1.9977628304479587},{"x":27,"A":7.188757318143651,"B":-0.018061266716910107,"C":-3.191151010352231},{"x":28,"A":7.859742099072432,"B":-0.5623062166290448,"C":-4.647875289634143},{"x":29,"A":8.637883296437387,"B":-0.097627815396782,"C":-6.041966303299153},{"x":30,"A":6.639143379605177,"B":-0.4782452977940659,"C":-6.46723665668075},{"x":31,"A":7.241994784447104,"B":-1.7015264483660275,"C":-6.297299459833129},{"x":32,"A":7.421109224249102,"B":-2.5675732574293986,"C":-4.051316794711255},{"x":33,"A":6.601443232148304,"B":-2.794997774769917,"C":-3.807367731854692},{"x":34,"A":6.9721810432245315,"B":-2.8804384094740954,"C":-4.006790584713686},{"x":35,"A":4.8691377850302375,"B":-3.1139243002469623,"C":-4.682205575370366},{"x":36,"A":4.517266690256215,"B":-2.1930799990276713,"C":-5.101731608525155},{"x":37,"A":3.485769197484071,"B":-1.299273754556793,"C":-4.524150778332247},{"x":38,"A":3.762017613123552,"B":-1.3816226991479936,"C":-4.590415280444244},{"x":39,"A":3.0660517795609286,"B":-0.6925065101280062,"C":-4.055087175025481},{"x":40,"A":2.8487123867318385,"B":-1.4353069743404299,"C":-5.275206575184798},{"x":41,"A":2.4051190662533575,"B":-0.37596307617964786,"C":-3.3085428161148127},{"x":42,"A":2.2310419545582247,"B":-0.5158875224406237,"C":-2.057662865230045},{"x":43,"A":2.9019069844462635,"B":0.7529753423087833,"C":-1.6228996217757365},{"x":44,"A":2.422073303712959,"B":1.564693387022937,"C":-1.3510666300928387},{"x":45,"A":3.2400104560086334,"B":0.4786563261424981,"C":-1.292510737411241},{"x":46,"A":3.4889076293623384,"B":2.230820457277057,"C":-1.4846491042824934},{"x":47,"A":3.4337855959366905,"B":2.529461489747932,"C":-1.0527549645638343},{"x":48,"A":3.24336831342732,"B":1.7911878141794606,"C":0.4399365061156659},{"x":49,"A":2.306785032915202,"B":-0.40308513770316257,"C":0.7284257270276329},{"x":50,"A":2.034701729313355,"B":-0.7266051669141078,"C":1.3822911085067906},{"x":51,"A":1.175999057376361,"B":-0.49358252723409524,"C":1.4533088706435628},{"x":52,"A":1.3875169467634507,"B":-2.338984540210113,"C":0.9503334877409162},{"x":53,"A":1.973913316742821,"B":-0.9981845845383688,"C":-0.02689423588116746},{"x":54,"A":1.7084183293287425,"B":-1.8841717554685884,"C":0.15925320620782912},{"x":55,"A":0.8807731796639391,"B":-1.5352274269402488,"C":0.720530902459485},{"x":56,"A":0.8692084063003258,"B":-1.0889396393567057,"C":0.7475062532127461},{"x":57,"A":1.152612154636803,"B":-0.8554853683038226,"C":1.2988613828702507},{"x":58,"A":-1.0311225338070116,"B":-0.8860308556789274,"C":-0.010501698933419679},{"x":59,"A":-1.0742925508618757,"B":0.07601085387138085,"C":-1.2746420038883408},{"x":60,"A":0.017613296605799578,"B":1.4129680630141968,"C":-2.5643023301765857},{"x":61,"A":0.03821647171923148,"B":2.2934519822217485,"C":-3.5727978213393814},{"x":62,"A":-0.26123311795345305,"B":2.807591049950154,"C":-3.75154426655275},{"x":63,"A":-1.9003624780681945,"B":2.035157333503369,"C":-3.980208764919382},{"x":64,"A":-2.7778557668911787,"B":1.6736211284290339,"C":-2.490756692575425},{"x":65,"A":-2.3211252554529915,"B":0.33580521757988335,"C":-1.9905554165805301},{"x":66,"A":-0.9292609789031119,"B":1.056567872592216,"C":-1.5588569795592626},{"x":67,"A":-0.4208156091848332,"B":2.07002786714537,"C":-2.632366308870408},{"x":68,"A":-0.5970357478367601,"B":2.8536272384296173,"C":-3.3311819622962138},{"x":69,"A":-2.006985240786852,"B":3.9306446781008684,"C":-3.1957551990052013},{"x":70,"A":-1.5290246674132184,"B":3.9793438895497055,"C":-2.691383891673192},{"x":71,"A":1.3740703570274875,"B":3.3649428859153496,"C":-2.0796346649882733},{"x":72,"A":0.9975822306738744,"B":2.290594247912695,"C":-1.898096558554664},{"x":73,"A":2.051499152452745,"B":0.9858297935903775,"C":-2.4300709523816635},{"x":74,"A":1.5446002788274769,"B":2.133283035549157,"C":-1.6328450861914248},{"x":75,"A":1.8249614263098644,"B":2.110477527799092,"C":-0.31831889756977105},{"x":76,"A":1.9833257033044072,"B":1.7924397406120884,"C":-0.6942642388615705},{"x":77,"A":2.964903864882194,"B":2.620044439538459,"C":-1.5743186448227835},{"x":78,"A":3.7627364108322583,"B":4.0599047896970095,"C":-2.5964622677136995},{"x":79,"A":5.396311433861227,"B":4.122841933824191,"C":-3.1006600667599318},{"x":80,"A":6.683658237630548,"B":4.313202902018627,"C":-2.2992566189693275},{"x":81,"A":7.994431954190927,"B":4.562104352120576,"C":-1.8234269148232536},{"x":82,"A":8.239553248417922,"B":3.8515129893099993,"C":-2.234331387186123},{"x":83,"A":10.81962466759565,"B":4.369111672593116,"C":-2.8421751047935397},{"x":84,"A":10.714843575088434,"B":3.6207052439787826,"C":-2.1737290571906525},{"x":85,"A":9.925806935197125,"B":2.257904602164789,"C":0.6851855744447621},{"x":86,"A":11.64214609575041,"B":0.711465988453138,"C":-0.2265101435545831},{"x":87,"A":11.316946707168109,"B":2.4994073372838286,"C":-0.030995979189669676},{"x":88,"A":11.942706157381314,"B":2.3785041223603915,"C":0.5566296633633911},{"x":89,"A":11.376230867874245,"B":3.6839008050947375,"C":1.1053274684148622},{"x":90,"A":13.33899357927529,"B":3.313122977916668,"C":1.0435856328262527},{"x":91,"A":13.635861658071113,"B":2.237746381213625,"C":-0.3565011604560486},{"x":92,"A":13.986210208242268,"B":0.7231122678427349,"C":-2.0482384598601713},{"x":93,"A":13.637891472532878,"B":1.0900595980164778,"C":1.5963480853123926},{"x":94,"A":14.069655986884333,"B":2.16911701760687,"C":1.8556067308993551},{"x":95,"A":13.252205517648479,"B":2.7515074239154718,"C":1.398911186457013},{"x":96,"A":12.298457712174539,"B":1.053686505231913,"C":1.2913790129228853},{"x":97,"A":12.672504856512743,"B":0.24524608721455188,"C":0.12362272950104769},{"x":98,"A":12.628113577521603,"B":2.8549387820698717,"C":0.40107896787329733},{"x":99,"A":11.996185409063981,"B":2.5758916660452167,"C":1.072498678812611},{"x":100,"A":11.463454837165711,"B":2.759719664283314,"C":1.9871732027835332}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Thursday 26 June 2025 08:49">Thursday 26 June 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
