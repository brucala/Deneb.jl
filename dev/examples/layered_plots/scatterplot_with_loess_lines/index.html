<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-d2b85731-1298-4115-8f10-46819d8bc98a.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-d2b85731-1298-4115-8f10-46819d8bc98a.vega-embed details,
  #vis-d2b85731-1298-4115-8f10-46819d8bc98a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-d2b85731-1298-4115-8f10-46819d8bc98a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-d2b85731-1298-4115-8f10-46819d8bc98a") {
      outputDiv = document.getElementById("vis-d2b85731-1298-4115-8f10-46819d8bc98a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":0.8080405673406089,"B":-0.6050152891229357,"C":0.4427316779581906},{"x":2,"A":1.6235861902364457,"B":-1.5619922710764675,"C":0.7524055633005595},{"x":3,"A":2.2907735732146057,"B":-2.1838556194130008,"C":-0.06918692853039288},{"x":4,"A":3.2720342673195373,"B":-2.6591537942723424,"C":-1.6145323155658202},{"x":5,"A":3.1476047287629934,"B":-2.582817400966772,"C":-1.9402927426404606},{"x":6,"A":2.8409650492127994,"B":-2.213911441285278,"C":-1.9085094542060341},{"x":7,"A":2.2111848202544584,"B":-2.1953658034335204,"C":-2.6455059046409573},{"x":8,"A":3.7216771035062797,"B":-1.3969290233130502,"C":-1.8498994488907061},{"x":9,"A":3.870502029790523,"B":-1.7224909983007648,"C":-2.5903239596616032},{"x":10,"A":3.961546515287827,"B":-1.129756070973249,"C":-3.4899993627129233},{"x":11,"A":3.2331873054801443,"B":-1.765233141678708,"C":-4.341295293108892},{"x":12,"A":2.263804577322661,"B":-1.043584757253809,"C":-3.8631477038980226},{"x":13,"A":0.7865604571633386,"B":-1.1656020100542432,"C":-3.3479651316315278},{"x":14,"A":1.82290041157782,"B":-1.141578986590813,"C":-2.625383889005686},{"x":15,"A":1.1317242074170646,"B":-0.598467323291858,"C":-2.4337243281367473},{"x":16,"A":1.3793868262333397,"B":0.32632886584981946,"C":-3.297016993796826},{"x":17,"A":1.0823684927751225,"B":-1.7458414801790192,"C":-1.067650295638817},{"x":18,"A":2.2652655431890505,"B":-2.002931053284729,"C":-2.31632679900051},{"x":19,"A":2.9870447681507577,"B":-1.186376997601749,"C":-4.0142570439320515},{"x":20,"A":2.635046424664138,"B":-0.8010475645536901,"C":-3.7733687360842247},{"x":21,"A":3.5769060656848315,"B":-0.8431790788883691,"C":-3.241374196623831},{"x":22,"A":2.187637349664788,"B":-0.3315749375245524,"C":-4.01840242431921},{"x":23,"A":1.9052675776118333,"B":-0.6198179905102851,"C":-3.7610625145054404},{"x":24,"A":2.3554634134256025,"B":-1.6234024710527217,"C":-4.27018652096418},{"x":25,"A":3.1577145466604697,"B":-1.4631061613337106,"C":-5.998475997362363},{"x":26,"A":1.9144389043194123,"B":-1.8851200037635285,"C":-5.43973881209404},{"x":27,"A":1.814875291328021,"B":-2.4700355167291983,"C":-5.341271947206484},{"x":28,"A":3.2123889317008283,"B":-2.079986958952932,"C":-3.3669676984245243},{"x":29,"A":2.899140855833402,"B":-0.7205922084997993,"C":-2.223310805904726},{"x":30,"A":2.2985041959171855,"B":-2.3368651812580747,"C":-2.076242714749812},{"x":31,"A":3.5722216590537728,"B":-5.264634826141467,"C":-2.341145616286103},{"x":32,"A":3.827549299925469,"B":-3.770937065289711,"C":-1.8642299818263006},{"x":33,"A":3.682816595930898,"B":-4.285224662382568,"C":-3.1492522502267106},{"x":34,"A":2.384895381112118,"B":-4.702604322099919,"C":-2.3445933515459365},{"x":35,"A":2.985283605309006,"B":-3.6052740938648724,"C":-3.100422499106005},{"x":36,"A":3.927583991901478,"B":-3.2476512845389514,"C":-3.176166966183409},{"x":37,"A":3.413794227543648,"B":-3.4394316808532106,"C":-3.6804988347354706},{"x":38,"A":3.201768367266717,"B":-1.4698565604869944,"C":-3.9940441987463315},{"x":39,"A":1.0647941483818584,"B":-2.1914716284008238,"C":-3.9115122445347246},{"x":40,"A":1.2526517843765186,"B":-2.917376747784964,"C":-3.70205702368017},{"x":41,"A":0.2388573743447031,"B":-4.287454115733212,"C":-4.900922034926127},{"x":42,"A":0.2794066082031901,"B":-5.801407331123894,"C":-4.333901059691574},{"x":43,"A":0.6309214341672043,"B":-6.657465155731481,"C":-3.5879826421004464},{"x":44,"A":-0.5778501512733464,"B":-5.280807165105898,"C":-2.621945812808883},{"x":45,"A":0.6409547602737801,"B":-5.8695709787452035,"C":-2.3654222107650473},{"x":46,"A":-1.458782783403207,"B":-5.47975912154385,"C":-3.3512912400448256},{"x":47,"A":-0.8179393527978597,"B":-4.984020202467914,"C":-3.343179230653992},{"x":48,"A":-0.22327385153507062,"B":-5.389407773468902,"C":-3.3909443078103565},{"x":49,"A":0.09681839269219694,"B":-6.447995511331724,"C":-2.7001012222819925},{"x":50,"A":-0.40523352460153805,"B":-7.4982303590637915,"C":-3.313024806198603},{"x":51,"A":0.14454098633329826,"B":-9.200934801850652,"C":-4.261291519249166},{"x":52,"A":-0.7933154747167207,"B":-8.297479086743442,"C":-5.631097812884508},{"x":53,"A":0.6370207463107854,"B":-5.744267551283011,"C":-5.526218555801133},{"x":54,"A":-0.05366346061224292,"B":-5.870118277573866,"C":-4.298053238256743},{"x":55,"A":0.3661814831210421,"B":-4.900704671118266,"C":-3.000681650064719},{"x":56,"A":0.03704022357211956,"B":-4.197025584538385,"C":-1.8385736770141694},{"x":57,"A":0.7459206877469954,"B":-4.574209354929625,"C":-0.6953321666959494},{"x":58,"A":1.320250388427337,"B":-4.438869106996045,"C":-0.08941358508420927},{"x":59,"A":0.9838179977862569,"B":-6.085202750818855,"C":-0.23433927866714865},{"x":60,"A":1.2309158932984954,"B":-6.573872384815999,"C":-0.5012483469029994},{"x":61,"A":1.3161851185633968,"B":-6.983478724049155,"C":-1.1806477385942484},{"x":62,"A":-0.4514182971245043,"B":-7.526354142037691,"C":-1.9249010152312223},{"x":63,"A":0.21902619370801701,"B":-7.671639411597569,"C":-2.052307093202518},{"x":64,"A":-1.3753778497492628,"B":-8.027053876012525,"C":-1.615115204177835},{"x":65,"A":-2.03746211771371,"B":-8.5955325863591,"C":-1.5947954492466123},{"x":66,"A":0.34649889728324734,"B":-9.559923390406226,"C":-0.7297594617902255},{"x":67,"A":-0.5602461819411525,"B":-9.20800566864416,"C":-2.5324180719543627},{"x":68,"A":1.0274453323794557,"B":-8.697992552139524,"C":-2.9415858103795003},{"x":69,"A":1.4845353099643277,"B":-9.437766757428136,"C":-3.5095568550320904},{"x":70,"A":1.8339771791968897,"B":-9.647591639233141,"C":-4.663106703919127},{"x":71,"A":1.033282439085674,"B":-9.865608757104194,"C":-5.39048926495},{"x":72,"A":-0.13798997677361746,"B":-8.990475316956068,"C":-6.247407121791979},{"x":73,"A":-0.48924254454615157,"B":-9.59315092306568,"C":-6.960237289323416},{"x":74,"A":0.02399556256719193,"B":-10.430826738463303,"C":-7.870261185560145},{"x":75,"A":2.6542324772747024,"B":-10.30565383924229,"C":-7.670053512118373},{"x":76,"A":4.066090073525578,"B":-11.464754726787334,"C":-7.0043839259539515},{"x":77,"A":5.361624804265486,"B":-11.837752253373985,"C":-7.046256129965983},{"x":78,"A":6.008577537554613,"B":-12.250155990123721,"C":-5.718377836857527},{"x":79,"A":5.727256377442581,"B":-10.931219420520652,"C":-7.340929866400989},{"x":80,"A":6.042201246116078,"B":-9.929744329420842,"C":-7.224418151914315},{"x":81,"A":7.112973163029914,"B":-8.187608540081335,"C":-5.603266988351326},{"x":82,"A":6.1336862759066335,"B":-8.893672110842491,"C":-7.030783994932304},{"x":83,"A":6.110821586388725,"B":-8.318216580591402,"C":-7.542142230317851},{"x":84,"A":6.201832279988259,"B":-9.781489647545186,"C":-7.981885082057128},{"x":85,"A":5.356146564671776,"B":-7.476105966486543,"C":-10.72781432147565},{"x":86,"A":7.310244089573186,"B":-8.271933306410448,"C":-11.883437703947704},{"x":87,"A":6.565904774490577,"B":-7.455178850370537,"C":-11.959479307155883},{"x":88,"A":6.691175116420394,"B":-7.813074426405672,"C":-11.42411465053932},{"x":89,"A":4.7374525034230865,"B":-6.478976885633225,"C":-9.620349486178448},{"x":90,"A":4.758420748816201,"B":-7.198853557324481,"C":-7.986550113124028},{"x":91,"A":6.017739130537254,"B":-8.455479047642926,"C":-6.379203066497408},{"x":92,"A":4.897677642243716,"B":-8.635392763607124,"C":-5.614289347802379},{"x":93,"A":5.036140106360231,"B":-10.653421735147116,"C":-5.654925272416672},{"x":94,"A":6.489473559193587,"B":-12.197672716267792,"C":-5.168786447348289},{"x":95,"A":6.707933639034324,"B":-12.435663001100759,"C":-5.8379072032453205},{"x":96,"A":7.529284684067857,"B":-11.738710416153195,"C":-8.001473783248942},{"x":97,"A":6.287941872074613,"B":-10.602279139726873,"C":-7.2359421339150884},{"x":98,"A":3.9173961499765917,"B":-11.027745818525398,"C":-6.398388972639347},{"x":99,"A":3.477403461280263,"B":-9.230219535225586,"C":-7.075608587427008},{"x":100,"A":3.516383934175324,"B":-10.570060546063395,"C":-7.095458371300294}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 5 October 2023 18:27">Thursday 5 October 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
