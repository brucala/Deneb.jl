<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-99f71850-a677-4ddf-87bb-3b273d12910a.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-99f71850-a677-4ddf-87bb-3b273d12910a.vega-embed details,
  #vis-99f71850-a677-4ddf-87bb-3b273d12910a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-99f71850-a677-4ddf-87bb-3b273d12910a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-99f71850-a677-4ddf-87bb-3b273d12910a") {
      outputDiv = document.getElementById("vis-99f71850-a677-4ddf-87bb-3b273d12910a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":-0.765525354943449,"B":1.7701443211396723,"C":0.29115649295892687},{"x":2,"A":0.03426405310956271,"B":2.5510788203295647,"C":0.12028833911366774},{"x":3,"A":-1.9923955129447446,"B":2.8903055038717844,"C":-0.8196159062349931},{"x":4,"A":-2.123255753675831,"B":1.9177502548766254,"C":0.11831020177337692},{"x":5,"A":-3.4739075405218816,"B":1.5447833393598942,"C":1.0021409424500383},{"x":6,"A":-4.122567318655516,"B":3.0917071864665604,"C":1.4538251192258698},{"x":7,"A":-4.99790293835342,"B":2.599004976189036,"C":0.3093082683856264},{"x":8,"A":-4.431954050522274,"B":4.304773568263451,"C":-1.1464692490659703},{"x":9,"A":-3.6507918994941315,"B":4.180784169622999,"C":-3.0174437682633775},{"x":10,"A":-3.6409759407287625,"B":3.850873448243651,"C":-3.2296949826947277},{"x":11,"A":-2.078213522496964,"B":2.791024929274143,"C":-4.7600656420943075},{"x":12,"A":-2.2011273840107815,"B":3.071873997948805,"C":-4.9978922136848025},{"x":13,"A":-1.3377537110933413,"B":2.3426948340959006,"C":-4.722650782416506},{"x":14,"A":-1.2744022919140363,"B":3.4937795263393996,"C":-4.755488474490704},{"x":15,"A":-0.7085998398479411,"B":3.3017167202469446,"C":-4.204120505594793},{"x":16,"A":0.6306163971811297,"B":3.000220412632815,"C":-5.337303481785415},{"x":17,"A":0.9751754622629155,"B":3.8924679562253366,"C":-4.994260541722645},{"x":18,"A":-0.1309983040500623,"B":4.165762431936109,"C":-4.155563343556405},{"x":19,"A":-0.3422474617738985,"B":4.618675470564584,"C":-3.5198834100336938},{"x":20,"A":-1.126920336503796,"B":4.890670367467726,"C":-5.054766813669589},{"x":21,"A":-0.2598328715817283,"B":4.875989528989984,"C":-4.285249348576735},{"x":22,"A":-0.741161522263639,"B":4.944679108732875,"C":-4.8165068145508885},{"x":23,"A":-2.5141113527027943,"B":6.848873061563091,"C":-3.819251954098326},{"x":24,"A":-4.188817389173457,"B":6.064640522614218,"C":-2.6644032118416074},{"x":25,"A":-2.477102341125072,"B":6.5854034682002505,"C":-2.6739819769712794},{"x":26,"A":-2.0353279763635443,"B":8.01074398718041,"C":-1.1427138949564775},{"x":27,"A":-3.7246525241646684,"B":7.484855207551862,"C":-2.4648338829158116},{"x":28,"A":-1.1423226696733426,"B":7.761811302254599,"C":-2.074401753790507},{"x":29,"A":0.3426064672588013,"B":8.330730121187258,"C":-3.7618560033762876},{"x":30,"A":-0.2121557030007627,"B":7.6832920049846125,"C":-5.206766221020791},{"x":31,"A":0.8087686026843842,"B":6.952241791250478,"C":-4.2887998013490725},{"x":32,"A":0.03590464357880452,"B":6.784687209911769,"C":-3.872060633331645},{"x":33,"A":1.7115064379085831,"B":6.319498442592097,"C":-5.107672497103468},{"x":34,"A":0.506109222799826,"B":7.021832948531233,"C":-4.796977042142347},{"x":35,"A":0.17065308725636308,"B":7.8404526400494285,"C":-6.580602275614323},{"x":36,"A":-0.01973269695065638,"B":8.376311179405597,"C":-7.228090407019134},{"x":37,"A":-0.7880686728768256,"B":8.185057860839382,"C":-7.9274889264348145},{"x":38,"A":0.8651932722780004,"B":9.013975602410273,"C":-9.274888451885166},{"x":39,"A":0.178988110909449,"B":8.506430249124136,"C":-10.668402666795929},{"x":40,"A":-1.265524559658635,"B":7.4917062594366834,"C":-10.503587394010058},{"x":41,"A":-1.2251053568509636,"B":8.439534076857896,"C":-9.81646940801604},{"x":42,"A":-0.7588441174464886,"B":6.368292906597122,"C":-8.611524899724422},{"x":43,"A":-1.3295500723238138,"B":7.102526768355522,"C":-8.221192086146493},{"x":44,"A":-2.370320233360454,"B":7.582334274055235,"C":-6.498199082441805},{"x":45,"A":-1.7701651746072846,"B":7.371520433027899,"C":-5.871671571610691},{"x":46,"A":-1.4292605810211096,"B":8.709710930830596,"C":-5.019515311466445},{"x":47,"A":-1.6707611041506203,"B":8.584571331501465,"C":-5.938591636913472},{"x":48,"A":-1.169720253548971,"B":7.731811553245367,"C":-6.99272445355031},{"x":49,"A":-1.61510464233726,"B":8.271190867809466,"C":-7.707333064797148},{"x":50,"A":-1.1020427652626443,"B":9.159765671933632,"C":-7.889587507693672},{"x":51,"A":-0.24337621574070478,"B":9.114906605113429,"C":-8.378158332530884},{"x":52,"A":-1.29026311615179,"B":9.975903010880238,"C":-8.487990287901114},{"x":53,"A":-3.3144224224906584,"B":9.393648098660323,"C":-7.999984924597572},{"x":54,"A":-4.852205566146482,"B":9.38764510630164,"C":-9.849230351705865},{"x":55,"A":-5.512473728716541,"B":8.754725257534439,"C":-9.527034682560124},{"x":56,"A":-6.483438682008709,"B":8.90604782670814,"C":-9.342563631913027},{"x":57,"A":-6.156050497705655,"B":8.848741896003808,"C":-9.908187991281304},{"x":58,"A":-7.095640267356714,"B":7.801424206472997,"C":-10.975670463119116},{"x":59,"A":-7.990724920866745,"B":7.869435976856842,"C":-13.24706953465591},{"x":60,"A":-8.147717418422847,"B":7.37505450413237,"C":-13.00784594170242},{"x":61,"A":-8.215624680892187,"B":8.125940030610096,"C":-13.998852375556353},{"x":62,"A":-8.298442543992074,"B":6.346020422238711,"C":-14.514107225489195},{"x":63,"A":-8.050170884026873,"B":6.839335396328664,"C":-15.84737996366751},{"x":64,"A":-7.444126622427286,"B":6.511233542445657,"C":-15.028797825742974},{"x":65,"A":-9.541869895784043,"B":7.703156403893726,"C":-16.037727663941503},{"x":66,"A":-8.280557184129904,"B":6.9374765370897515,"C":-17.30543433502883},{"x":67,"A":-9.031727384159128,"B":6.648002816639882,"C":-17.519065871543702},{"x":68,"A":-9.115121082814241,"B":6.286549179791031,"C":-17.26285929525451},{"x":69,"A":-9.814901970215727,"B":7.228754149310837,"C":-18.112931479314387},{"x":70,"A":-9.48477111496757,"B":6.908447947693519,"C":-18.892416708370583},{"x":71,"A":-8.825856742337658,"B":8.328261618389835,"C":-19.691745833487094},{"x":72,"A":-7.381580431003222,"B":7.668869091282084,"C":-19.46579968146844},{"x":73,"A":-8.108114463789729,"B":6.971107806888022,"C":-18.110978714162076},{"x":74,"A":-9.571625105824696,"B":6.156726516356583,"C":-18.407922531308156},{"x":75,"A":-10.236209173434696,"B":6.996522916176736,"C":-20.76420001430404},{"x":76,"A":-11.299657447463346,"B":6.346585375794425,"C":-19.351522058118587},{"x":77,"A":-11.548271340861223,"B":5.043603610608676,"C":-19.44399392924635},{"x":78,"A":-10.474653557005894,"B":4.850414277887028,"C":-19.207247101383896},{"x":79,"A":-9.240087285045885,"B":3.701488812157536,"C":-19.099693834335252},{"x":80,"A":-10.033348829908059,"B":2.04972878555608,"C":-19.561530483176234},{"x":81,"A":-11.071993485478139,"B":3.9660237303477404,"C":-20.033810302582452},{"x":82,"A":-11.894119583958236,"B":5.293870397523249,"C":-19.676997824339796},{"x":83,"A":-10.659266554294586,"B":6.223368475084087,"C":-21.016546535747118},{"x":84,"A":-10.952656039470673,"B":6.870767967204509,"C":-20.623787681219113},{"x":85,"A":-10.710954567115664,"B":5.916559968502136,"C":-19.58710266737258},{"x":86,"A":-9.041951235037043,"B":5.9025987295482,"C":-19.12333191911438},{"x":87,"A":-10.686121078051071,"B":6.108969886910655,"C":-19.18711712410037},{"x":88,"A":-9.886999059934867,"B":5.729649861040806,"C":-18.514019010308637},{"x":89,"A":-9.69752315517113,"B":4.675464339774491,"C":-17.23466696420042},{"x":90,"A":-10.238525401387992,"B":5.793960611788285,"C":-16.593525672688685},{"x":91,"A":-10.154363521785227,"B":6.646873429466724,"C":-16.83563866096455},{"x":92,"A":-8.75145041278232,"B":4.30184043428603,"C":-15.714422113977541},{"x":93,"A":-9.505456085748133,"B":4.35109173436514,"C":-15.218089771352991},{"x":94,"A":-9.307440403833656,"B":3.629589778988777,"C":-16.605699923777543},{"x":95,"A":-10.079913013108293,"B":5.991065162867436,"C":-16.006539611634235},{"x":96,"A":-10.191147975615763,"B":5.446292855254913,"C":-16.57391685501417},{"x":97,"A":-11.127486038431304,"B":6.407118756548663,"C":-16.45870470196127},{"x":98,"A":-12.515987773603676,"B":7.188384499421417,"C":-16.71927771335852},{"x":99,"A":-12.507377784109122,"B":7.92384532148049,"C":-16.2027072548751},{"x":100,"A":-12.990544139036258,"B":7.801737950358773,"C":-14.261938052201442}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Saturday 29 July 2023 20:51">Saturday 29 July 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
