<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><meta name="title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="og:title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="twitter:title" content="Scatterplot with loess lines · Deneb.jl"/><meta name="description" content="Documentation for Deneb.jl."/><meta property="og:description" content="Documentation for Deneb.jl."/><meta property="twitter:description" content="Documentation for Deneb.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-c006afd5-c98b-476e-90a8-54409624abec.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-c006afd5-c98b-476e-90a8-54409624abec.vega-embed details,
  #vis-c006afd5-c98b-476e-90a8-54409624abec.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-c006afd5-c98b-476e-90a8-54409624abec"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-c006afd5-c98b-476e-90a8-54409624abec") {
      outputDiv = document.getElementById("vis-c006afd5-c98b-476e-90a8-54409624abec");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":0.2862802446916335,"B":-1.2528842844141581,"C":0.2507150274694612},{"x":2,"A":1.5619938320845317,"B":-2.164424168607522,"C":0.42024990372827503},{"x":3,"A":1.7151143629869325,"B":-3.392198861454605,"C":-0.9230582665633293},{"x":4,"A":1.6948087294488257,"B":-4.291824778885687,"C":-0.728385436823979},{"x":5,"A":1.832066723515964,"B":-1.9618641128903793,"C":-1.0558169708369163},{"x":6,"A":2.0563558234651147,"B":0.40552984700788897,"C":-0.9575339722525706},{"x":7,"A":2.5050314699090004,"B":2.0061078158056445,"C":-1.3856548790701797},{"x":8,"A":3.3935758467712303,"B":1.5512186707684184,"C":-2.3192143914809966},{"x":9,"A":3.2634453280939173,"B":2.4833820737781096,"C":-3.1314989561754127},{"x":10,"A":3.6479874235546976,"B":3.495746441996088,"C":-3.4142419762761094},{"x":11,"A":2.755482791128869,"B":3.3735739817214982,"C":-1.93122931989207},{"x":12,"A":3.8240096823755056,"B":5.489084678675667,"C":-0.4135010877176865},{"x":13,"A":2.49376128486134,"B":4.633982574581387,"C":0.020092494147043505},{"x":14,"A":3.074136233306489,"B":5.944101772616256,"C":2.14092329506793},{"x":15,"A":2.9147951218748895,"B":6.709616767047412,"C":2.7888389722127793},{"x":16,"A":2.879187554177194,"B":7.958478122172913,"C":2.6203616493249564},{"x":17,"A":2.9400017535831164,"B":8.148918792953944,"C":1.0903604959242656},{"x":18,"A":1.8892613678311485,"B":7.076130045183987,"C":1.861366063842348},{"x":19,"A":2.555712965943152,"B":7.612232898361439,"C":3.3827466167229443},{"x":20,"A":3.8741525318058105,"B":8.498284492332425,"C":3.3266227763811207},{"x":21,"A":3.5097600238717526,"B":10.587757601694069,"C":2.9458891149627036},{"x":22,"A":3.3263425133959172,"B":9.473041275995858,"C":3.907989775114753},{"x":23,"A":3.3806003596791427,"B":7.29566005223667,"C":4.661457782809681},{"x":24,"A":4.362141396652673,"B":6.605235513277031,"C":6.027608279037849},{"x":25,"A":4.9802190779882975,"B":5.210954070954659,"C":5.421210900954119},{"x":26,"A":5.431421355463319,"B":4.689104307594834,"C":3.2695028670567754},{"x":27,"A":5.416187845422927,"B":5.195275362207764,"C":1.7642826341121935},{"x":28,"A":5.494223608252206,"B":5.643967374218739,"C":1.9464421162621008},{"x":29,"A":5.780429684595957,"B":5.617776956321582,"C":-0.1091297296869908},{"x":30,"A":6.82235983480679,"B":5.173758613414572,"C":-0.2822925297917677},{"x":31,"A":5.809046386379343,"B":3.876162519216943,"C":-0.34722169202447833},{"x":32,"A":6.3103346837900895,"B":2.5750352982260827,"C":-0.2959690387464497},{"x":33,"A":6.163785759606887,"B":2.5117242761176515,"C":-0.30093333223578395},{"x":34,"A":4.6270209559607,"B":2.870314827909218,"C":0.3637706803616518},{"x":35,"A":3.804543035384894,"B":2.265774407353663,"C":0.6320013881366461},{"x":36,"A":2.8487061918743555,"B":3.306722266988241,"C":0.01946184230575465},{"x":37,"A":1.9428324506060328,"B":3.4898538062098012,"C":-1.6149532571102554},{"x":38,"A":3.384033469186633,"B":2.1710474070369816,"C":0.4741102627353902},{"x":39,"A":2.6870516551766634,"B":0.9769817623388233,"C":-1.190401845685274},{"x":40,"A":2.6489681659167763,"B":-0.16319372181815162,"C":-1.567568098857745},{"x":41,"A":1.4947243516194944,"B":1.5176800498749132,"C":-2.036650796330942},{"x":42,"A":2.7760402014842613,"B":1.9445385366231702,"C":-3.23837614476758},{"x":43,"A":3.075545980241192,"B":0.29991893303611983,"C":-3.0351564899813743},{"x":44,"A":3.1937431529821643,"B":-0.9162767470098787,"C":-2.758313619036393},{"x":45,"A":3.372163513225737,"B":-1.0211972895387675,"C":-3.0064229364475663},{"x":46,"A":1.8259646497269297,"B":-1.2118075585737718,"C":-1.89243572158119},{"x":47,"A":0.8022490822150685,"B":-0.9729694600397689,"C":-0.6778907347977492},{"x":48,"A":1.8297435915318454,"B":-1.4794813629846997,"C":-1.0714823972716043},{"x":49,"A":2.7205401715436306,"B":-3.2161146682515698,"C":-0.5895974295387916},{"x":50,"A":3.5263487367847777,"B":-3.065700127336362,"C":-0.5741764731488339},{"x":51,"A":4.189541196372678,"B":-2.5729099768517454,"C":-0.13266142701964967},{"x":52,"A":4.22398786322614,"B":-2.33573010418516,"C":-0.6275164372239515},{"x":53,"A":1.7803337577133227,"B":-2.523780561644216,"C":-0.396609506792914},{"x":54,"A":1.9617511070652969,"B":-2.2448314851054327,"C":-0.2767904855407108},{"x":55,"A":3.5978422726136206,"B":-0.21178178138038173,"C":-1.217571844805675},{"x":56,"A":5.112565182142481,"B":-0.4413806310554481,"C":-1.0579807221349988},{"x":57,"A":5.097588571663634,"B":-0.7849424617658973,"C":-1.5508967131217848},{"x":58,"A":5.246680574461169,"B":-3.226938024088792,"C":0.14880380730621706},{"x":59,"A":5.268192440934225,"B":-5.164266072504889,"C":0.29288337034679623},{"x":60,"A":4.849890460196024,"B":-6.045480038680834,"C":0.8712570980170471},{"x":61,"A":5.897199885159861,"B":-7.536796622402739,"C":0.05217770257307813},{"x":62,"A":4.553228816512601,"B":-8.220118213872516,"C":0.6980988254223794},{"x":63,"A":4.713499719168833,"B":-7.611880698230478,"C":0.5823945061964366},{"x":64,"A":4.164769480842744,"B":-7.447815662400787,"C":0.384208331464724},{"x":65,"A":5.439839538783945,"B":-8.690878978514412,"C":-1.06944739779438},{"x":66,"A":6.267935956278414,"B":-8.022246180688704,"C":-0.6812546864485622},{"x":67,"A":6.811451694409717,"B":-8.230468416176404,"C":0.07262483847760864},{"x":68,"A":6.745788321455735,"B":-6.919082311820854,"C":0.1728046860139946},{"x":69,"A":6.667714651548135,"B":-8.962306174815033,"C":-0.5788622524686982},{"x":70,"A":6.238583198324282,"B":-9.86385152247021,"C":0.011770640528233234},{"x":71,"A":5.586222827347589,"B":-9.59682305555635,"C":-1.1637508129969665},{"x":72,"A":5.6192743331473105,"B":-10.230804375640474,"C":-0.6229329829956765},{"x":73,"A":6.442448325112013,"B":-8.6585858399036,"C":-0.8960055997590894},{"x":74,"A":4.718373833507286,"B":-8.3703220282045,"C":0.38564154922294885},{"x":75,"A":3.74434733551133,"B":-10.136376417907602,"C":2.5976221297934567},{"x":76,"A":2.808058830556326,"B":-12.102951043571554,"C":2.1584052829169},{"x":77,"A":3.2321715801208297,"B":-12.224399022225965,"C":2.0967331320092364},{"x":78,"A":4.025273604608808,"B":-10.902009010661915,"C":3.1334964607452895},{"x":79,"A":3.4160469365503934,"B":-11.442447353628761,"C":2.824029979702596},{"x":80,"A":2.340837839023605,"B":-11.093057238705569,"C":3.215887803370625},{"x":81,"A":1.898246018566715,"B":-10.563512713929306,"C":4.435431312193372},{"x":82,"A":1.1596883057259806,"B":-10.43499790366467,"C":5.169000631509939},{"x":83,"A":2.083257848386082,"B":-9.985976317039846,"C":4.092305969071134},{"x":84,"A":1.6816938682981384,"B":-10.647835479758598,"C":3.7226102604164346},{"x":85,"A":0.6933527352928389,"B":-11.069373878760702,"C":1.7942048520804394},{"x":86,"A":0.8817599454008138,"B":-11.703788307976247,"C":0.3236947785250098},{"x":87,"A":-0.8158114835473682,"B":-11.03978243260851,"C":1.6833276331626816},{"x":88,"A":-0.7764758258016127,"B":-10.385865695786922,"C":2.400950032388515},{"x":89,"A":-2.402331353691446,"B":-9.200943214743768,"C":2.080043850743701},{"x":90,"A":-1.4980513808869687,"B":-8.851884414720889,"C":1.8574105279264133},{"x":91,"A":-1.374188895389033,"B":-9.835891907427717,"C":2.7442108013954454},{"x":92,"A":-2.3063051924040563,"B":-10.273637433525002,"C":3.2020577116726305},{"x":93,"A":-2.7495587416551963,"B":-11.713010019349783,"C":1.1889836871968245},{"x":94,"A":-1.7008456037898925,"B":-10.801942589046899,"C":0.1480288770607035},{"x":95,"A":-1.4753359857666573,"B":-12.754552141480474,"C":-0.24540965986451685},{"x":96,"A":-1.5927647324995926,"B":-11.692169444276832,"C":-0.6046800505845606},{"x":97,"A":-0.13660146402035545,"B":-12.61025399982774,"C":-1.0941907606810377},{"x":98,"A":-1.4474211703172286,"B":-12.906527648853457,"C":-1.229844164038943},{"x":99,"A":-1.3351205642971624,"B":-11.679391544086847,"C":-0.8176855621326058},{"x":100,"A":-2.270520601879933,"B":-12.043360473389495,"C":-1.0768773759972226}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Sunday 8 October 2023 15:46">Sunday 8 October 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
