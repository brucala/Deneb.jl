<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><meta name="title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="og:title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="twitter:title" content="Scatterplot with loess lines · Deneb.jl"/><meta name="description" content="Documentation for Deneb.jl."/><meta property="og:description" content="Documentation for Deneb.jl."/><meta property="twitter:description" content="Documentation for Deneb.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-6d1c4712-a6a2-440b-aa3a-4bc81e7a82f8.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-6d1c4712-a6a2-440b-aa3a-4bc81e7a82f8.vega-embed details,
  #vis-6d1c4712-a6a2-440b-aa3a-4bc81e7a82f8.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-6d1c4712-a6a2-440b-aa3a-4bc81e7a82f8"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-6d1c4712-a6a2-440b-aa3a-4bc81e7a82f8") {
      outputDiv = document.getElementById("vis-6d1c4712-a6a2-440b-aa3a-4bc81e7a82f8");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":1.3289471946549851,"B":0.7904763797073723,"C":-0.665998230051228},{"x":2,"A":2.5297606047448467,"B":1.0944381889383914,"C":-1.1580766651817427},{"x":3,"A":1.4250231586939903,"B":-0.5351213674607603,"C":-1.478364761658299},{"x":4,"A":1.9011529772245526,"B":1.3357137306854212,"C":-0.8754575686466857},{"x":5,"A":0.5319065686155721,"B":1.0107566047486283,"C":-1.0717320244541775},{"x":6,"A":0.4911227453573439,"B":0.3364916012325959,"C":-3.872341276006984},{"x":7,"A":1.8303965947636913,"B":0.9951683519942762,"C":-2.816161746298544},{"x":8,"A":3.43019379516722,"B":1.3854701213007292,"C":-3.0209828598753075},{"x":9,"A":4.196815507842695,"B":1.6546303073571385,"C":-2.38449292581093},{"x":10,"A":4.599756691946873,"B":1.6946860374093138,"C":-2.491531350326017},{"x":11,"A":4.740266663712432,"B":1.7889857121877284,"C":-2.180913321692144},{"x":12,"A":4.457863577628448,"B":2.4893223425775157,"C":-3.9603747419755906},{"x":13,"A":5.4225201259373375,"B":0.09841521802236441,"C":-4.324855756973583},{"x":14,"A":4.983429962908927,"B":3.074823088331822,"C":-2.149086551036176},{"x":15,"A":5.188278098732101,"B":3.1777124280013447,"C":-1.8118841290444334},{"x":16,"A":4.538243279279432,"B":3.5975415316075097,"C":-2.0619717552251364},{"x":17,"A":5.017295454804842,"B":4.736566835413242,"C":-3.471672380967343},{"x":18,"A":3.8314213381403928,"B":4.501874786292681,"C":-1.6192765646030707},{"x":19,"A":4.244215225686116,"B":3.002510859729766,"C":-1.4639557586652399},{"x":20,"A":3.157352483481228,"B":2.9843891816360046,"C":-1.7279766569579769},{"x":21,"A":3.135958297961057,"B":4.591085821456009,"C":-1.162115484011362},{"x":22,"A":2.384012114465235,"B":4.005207595947518,"C":0.045993532382030966},{"x":23,"A":2.023833079328593,"B":4.977391063672543,"C":-2.7815068820504996},{"x":24,"A":1.3400900664186466,"B":6.1848617983240635,"C":-3.7429879754129978},{"x":25,"A":1.5258209566219716,"B":8.039077444177979,"C":-2.852964967091579},{"x":26,"A":2.3328091816039294,"B":8.478735880063814,"C":-0.8043688533873531},{"x":27,"A":2.233000008743731,"B":7.370766181753195,"C":-1.500892224241877},{"x":28,"A":1.6686297284704854,"B":6.34084987494374,"C":-3.5559005341393455},{"x":29,"A":1.3028380468512442,"B":5.494880357634634,"C":-4.323749683235351},{"x":30,"A":1.1906304100503673,"B":5.972988464243528,"C":-4.4618569276418825},{"x":31,"A":1.383118583920035,"B":6.43825706611815,"C":-5.433582179223751},{"x":32,"A":2.2185774011400627,"B":5.283100578863711,"C":-4.0785476349301195},{"x":33,"A":0.9122722881496513,"B":5.3340350957231895,"C":-4.103202422081233},{"x":34,"A":1.1818132519651374,"B":3.462539754011317,"C":-3.930313311012462},{"x":35,"A":2.1513283323839127,"B":5.754491966631988,"C":-3.539001062845058},{"x":36,"A":2.1434058478296425,"B":5.285029039753688,"C":-4.298731739664398},{"x":37,"A":2.203004907693243,"B":6.0439444001582,"C":-3.9053145403619456},{"x":38,"A":3.277506296996898,"B":5.078549109919975,"C":-3.138404601054554},{"x":39,"A":2.721920695587391,"B":5.283857242192571,"C":-5.524521843624909},{"x":40,"A":3.5490796350850458,"B":4.426310358074752,"C":-4.732990409896566},{"x":41,"A":4.162188310990114,"B":3.3386569871255287,"C":-5.1915204248976705},{"x":42,"A":3.4730693226696747,"B":4.422440752337769,"C":-5.753685700265097},{"x":43,"A":3.429685147799697,"B":5.025963012533281,"C":-5.290137805494808},{"x":44,"A":3.489443293131532,"B":5.480022345159149,"C":-4.851502449810125},{"x":45,"A":4.917692742327334,"B":6.016480362106542,"C":-2.4808614179699857},{"x":46,"A":5.776082171437681,"B":8.029983867699723,"C":-3.987467855979695},{"x":47,"A":5.284544897376785,"B":6.346026960850266,"C":-4.768264956740632},{"x":48,"A":4.926391657602592,"B":6.687848104483219,"C":-1.6034357034242182},{"x":49,"A":5.523553434955415,"B":7.57757504831916,"C":-0.585879014724663},{"x":50,"A":6.20290853518657,"B":8.196905240318214,"C":-2.051405792768956},{"x":51,"A":8.764031089698042,"B":8.540783609812578,"C":-2.150317514255976},{"x":52,"A":8.780412649566092,"B":8.683909729915271,"C":-0.9113113786783146},{"x":53,"A":8.142869938637903,"B":9.644397335278256,"C":-0.8220791977333279},{"x":54,"A":8.554701261913905,"B":10.724312661277896,"C":-0.5780744143864545},{"x":55,"A":9.3090245971146,"B":8.883678892271327,"C":-0.008430871912594395},{"x":56,"A":10.151182266937726,"B":9.922211246013298,"C":-0.6129348452014142},{"x":57,"A":9.678194374509694,"B":9.929330896205546,"C":-0.09987469370992097},{"x":58,"A":10.82674077762704,"B":10.65841639705032,"C":0.462571672597896},{"x":59,"A":11.516373995957824,"B":10.75823781438024,"C":-0.24490486902386255},{"x":60,"A":10.455222144087688,"B":11.6488792309943,"C":0.79057897830809},{"x":61,"A":11.65586919787308,"B":13.484681575253266,"C":0.3313050425528775},{"x":62,"A":10.727359670853065,"B":13.373280027242046,"C":1.4134182802128121},{"x":63,"A":12.24554761558504,"B":13.446776479052863,"C":1.605183539686018},{"x":64,"A":13.55818141014764,"B":13.715399096317288,"C":1.6506466890737261},{"x":65,"A":13.612724793999146,"B":13.007625275196009,"C":1.4582843909012966},{"x":66,"A":13.283020908330254,"B":12.836962594898376,"C":0.7764551777528163},{"x":67,"A":12.08063350149934,"B":13.231826908706788,"C":0.8428936601394547},{"x":68,"A":12.444756920900076,"B":14.073151318040978,"C":0.6920585342935045},{"x":69,"A":10.823716089207826,"B":15.424628973280988,"C":0.7983273907283491},{"x":70,"A":9.142216015808382,"B":15.787239037469131,"C":1.785217193103807},{"x":71,"A":9.930583598184137,"B":14.188055617375252,"C":0.8563774554231735},{"x":72,"A":9.521473642772131,"B":13.546340769350659,"C":1.7860828265627875},{"x":73,"A":8.189807305733197,"B":12.574650795181899,"C":0.9301489087649145},{"x":74,"A":8.708346857692849,"B":11.224688238320422,"C":1.8113291345336804},{"x":75,"A":8.459909188162495,"B":12.75746228077563,"C":1.7788460777884794},{"x":76,"A":7.708785734661673,"B":10.834427497666054,"C":2.2876606711061727},{"x":77,"A":9.0557836269848,"B":11.446651667764636,"C":3.598522625754069},{"x":78,"A":9.899259291909724,"B":11.960643372854063,"C":3.269535198708718},{"x":79,"A":10.446314944541426,"B":12.326234642868357,"C":3.4457731222054138},{"x":80,"A":11.151463031219286,"B":13.671156567615938,"C":3.9966164153949464},{"x":81,"A":12.195621400199173,"B":14.548632176820657,"C":4.27457200896268},{"x":82,"A":12.648322627779827,"B":15.942086341341707,"C":6.029372671015043},{"x":83,"A":11.822319422318218,"B":15.441611551935603,"C":5.932461283503861},{"x":84,"A":12.617585881453648,"B":15.717292150280784,"C":4.28780035439215},{"x":85,"A":12.88210184888437,"B":15.674523976749205,"C":4.979422617365312},{"x":86,"A":13.702904655288565,"B":15.079144339189046,"C":5.7491519680249175},{"x":87,"A":14.61557829984068,"B":16.049150993992395,"C":5.3922992602126465},{"x":88,"A":13.167738017648663,"B":14.506675703103177,"C":7.084109984114262},{"x":89,"A":12.981729741128582,"B":15.507054617213026,"C":6.378627268312976},{"x":90,"A":12.918378662966314,"B":16.124526805781613,"C":6.819747506297085},{"x":91,"A":14.037036646483802,"B":15.272030369282465,"C":7.4234457733978125},{"x":92,"A":15.374315568915708,"B":15.9909544382894,"C":8.88696075381772},{"x":93,"A":14.876042855296612,"B":14.678336813215845,"C":9.505193870350924},{"x":94,"A":14.315917832276101,"B":14.476801091026763,"C":9.690206855518554},{"x":95,"A":14.290939253991912,"B":12.927040428562925,"C":11.020227979244247},{"x":96,"A":14.49526658513544,"B":15.277354216580761,"C":9.330583759158047},{"x":97,"A":13.573613056551316,"B":14.724921579042528,"C":9.753227473910366},{"x":98,"A":13.513954364501274,"B":14.315745427799135,"C":10.702784845824636},{"x":99,"A":12.675927940181692,"B":14.196714265304138,"C":11.11065821074763},{"x":100,"A":13.08499145690135,"B":12.835204130800214,"C":10.997984696326844}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Wednesday 11 October 2023 08:24">Wednesday 11 October 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
