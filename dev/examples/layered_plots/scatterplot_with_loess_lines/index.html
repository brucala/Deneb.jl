<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-c23be1c6-7bbf-4c3f-979a-bed2642d3d38.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-c23be1c6-7bbf-4c3f-979a-bed2642d3d38.vega-embed details,
  #vis-c23be1c6-7bbf-4c3f-979a-bed2642d3d38.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-c23be1c6-7bbf-4c3f-979a-bed2642d3d38"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-c23be1c6-7bbf-4c3f-979a-bed2642d3d38") {
      outputDiv = document.getElementById("vis-c23be1c6-7bbf-4c3f-979a-bed2642d3d38");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":-0.1919071643166707,"B":0.33128086520961625,"C":-0.5293195174394313},{"x":2,"A":1.0271002702984202,"B":-0.5937124400895193,"C":-0.07750247801896432},{"x":3,"A":-0.22093274725489825,"B":0.0225677457034264,"C":0.8337296911310735},{"x":4,"A":-0.5516095621531446,"B":-2.086142145912751,"C":0.3338197157586471},{"x":5,"A":0.6696981900421337,"B":-1.7910421275806228,"C":-0.708080047406088},{"x":6,"A":1.361808902551117,"B":-1.4397088577379902,"C":0.20547151433469757},{"x":7,"A":-0.3389204836505337,"B":-0.08882489598867321,"C":0.3374602644989575},{"x":8,"A":-0.9679828853425887,"B":1.3521588650738101,"C":0.5817474051523163},{"x":9,"A":-1.8580519851597217,"B":2.711769225521686,"C":-0.6886307577426914},{"x":10,"A":-2.4148351213225734,"B":3.346749459517751,"C":-1.3277333170788599},{"x":11,"A":-1.2655580326043172,"B":4.479180552172044,"C":-2.221551416160567},{"x":12,"A":-1.7403909336821555,"B":3.135860311112981,"C":-2.7848725376023253},{"x":13,"A":-0.7783194751956171,"B":4.087088527874077,"C":-4.8452725656388145},{"x":14,"A":-1.3738582669863046,"B":2.5124759600894486,"C":-5.656233678847266},{"x":15,"A":-1.965932881993563,"B":2.3847441375407286,"C":-6.522407624303401},{"x":16,"A":-1.9060144444317395,"B":2.3620021239903735,"C":-7.733382564482887},{"x":17,"A":-1.714155748557804,"B":1.223519315148595,"C":-7.007323313236048},{"x":18,"A":-1.4908072360605045,"B":0.13402304183284458,"C":-6.67578875237249},{"x":19,"A":-2.8476003991102425,"B":0.13503140920214102,"C":-6.347126878195365},{"x":20,"A":-1.961877594080956,"B":0.5237803032692475,"C":-6.794963757416234},{"x":21,"A":-2.07815093187944,"B":-1.6240084404772674,"C":-6.073516843044411},{"x":22,"A":-1.8899714080233996,"B":-0.7927034315203931,"C":-6.634030069367867},{"x":23,"A":-1.784039249191232,"B":-0.44476423925969594,"C":-6.5981556454783785},{"x":24,"A":-2.7314685542962214,"B":-1.5224391134603654,"C":-6.558189816226831},{"x":25,"A":-3.0536216919538917,"B":-1.485610407988452,"C":-6.465428803428265},{"x":26,"A":-2.969309502973553,"B":-2.1682242854346496,"C":-7.16209088328346},{"x":27,"A":-2.2964212197768794,"B":-0.28749582921066125,"C":-6.201842902143575},{"x":28,"A":-3.5576372808324535,"B":-1.0046640853149058,"C":-5.324084555784525},{"x":29,"A":-2.106750961322924,"B":-0.14861625445322707,"C":-7.7613841532338625},{"x":30,"A":-1.565149698816335,"B":0.3010532857383128,"C":-9.30083172959201},{"x":31,"A":-1.9646600130890735,"B":1.4845041194365354,"C":-9.59263997303986},{"x":32,"A":-3.4773010196500964,"B":2.0942627424304305,"C":-9.648647130995212},{"x":33,"A":-4.311052278203932,"B":1.6455280937614276,"C":-10.177372821090135},{"x":34,"A":-4.780965681858353,"B":2.7705417693224246,"C":-10.958185513496801},{"x":35,"A":-5.831501900823756,"B":3.5661847045211803,"C":-9.547304493949166},{"x":36,"A":-4.665205037192411,"B":4.094918574766568,"C":-11.056321835409863},{"x":37,"A":-5.6467808393106225,"B":4.754790876382474,"C":-10.17782320263118},{"x":38,"A":-5.20570354802605,"B":3.7042046510610662,"C":-9.960865819179867},{"x":39,"A":-4.6554734581768145,"B":2.846758191731234,"C":-10.745199249469348},{"x":40,"A":-4.418961721460889,"B":3.1690249788760183,"C":-11.772862039348329},{"x":41,"A":-3.1522055068837243,"B":3.8795216852976284,"C":-11.604037017981746},{"x":42,"A":-0.5220165587232122,"B":3.148907484441482,"C":-12.661778065665501},{"x":43,"A":-0.02190042077927451,"B":1.6587296354420689,"C":-12.902791719087332},{"x":44,"A":-0.26003320088614956,"B":0.6116279773450701,"C":-13.160739583015193},{"x":45,"A":1.1231037061457712,"B":1.0572673149791203,"C":-13.574639252459793},{"x":46,"A":-0.543119929265762,"B":1.4541933088907193,"C":-12.401173869115292},{"x":47,"A":-0.5360093909065973,"B":1.8599040272147038,"C":-11.492251246422136},{"x":48,"A":-1.640420021898367,"B":-0.01259059680676472,"C":-14.220365367637621},{"x":49,"A":-3.046652044469113,"B":-0.03203586483913584,"C":-12.94253441014763},{"x":50,"A":-4.375472590246723,"B":-1.5895044803620708,"C":-12.888354340458429},{"x":51,"A":-3.4791822855607264,"B":-2.1080063609696524,"C":-13.209586009740578},{"x":52,"A":-3.825165322525376,"B":-2.175893322735853,"C":-13.344197640803003},{"x":53,"A":-3.376887339065673,"B":-3.290172797723584,"C":-13.773773414121994},{"x":54,"A":-3.0750780488642073,"B":-4.752541396875719,"C":-14.262532528939172},{"x":55,"A":-2.6832949745476795,"B":-5.684393646877758,"C":-11.368312507763374},{"x":56,"A":-4.804680792358713,"B":-6.3609379478783,"C":-13.473300102310569},{"x":57,"A":-4.391973256705478,"B":-7.239672749375507,"C":-12.76774437229393},{"x":58,"A":-3.731794535679389,"B":-7.064545673408861,"C":-12.060073924885462},{"x":59,"A":-4.476026308306995,"B":-6.884699413417745,"C":-13.104848058432383},{"x":60,"A":-4.9155106273703675,"B":-6.61296847334329,"C":-13.789622262832017},{"x":61,"A":-7.622986529073793,"B":-5.529376475043796,"C":-14.440123464534134},{"x":62,"A":-6.886614575809902,"B":-4.1269201967778395,"C":-13.674223314210932},{"x":63,"A":-7.363923845749202,"B":-2.3672194965670794,"C":-14.686280205082584},{"x":64,"A":-7.982659541491369,"B":-2.948083282586722,"C":-13.465179302818896},{"x":65,"A":-7.953589423536474,"B":-4.156797041304787,"C":-13.285419207618254},{"x":66,"A":-10.06399626263715,"B":-4.7725359857686716,"C":-13.446522254426267},{"x":67,"A":-10.469847780478268,"B":-4.335505462368263,"C":-13.554137392435402},{"x":68,"A":-11.722830754685896,"B":-4.672195371489156,"C":-11.928793347087618},{"x":69,"A":-10.547812035055944,"B":-3.772689183564136,"C":-13.301507296606946},{"x":70,"A":-11.575173579160206,"B":-3.6901832072462177,"C":-13.824073759037553},{"x":71,"A":-10.706796677213672,"B":-2.6483271287681536,"C":-13.8492939859307},{"x":72,"A":-9.903547188723905,"B":-3.353560492957839,"C":-11.85346682692909},{"x":73,"A":-9.894727082420482,"B":-3.5056061623750328,"C":-11.146316670150467},{"x":74,"A":-11.665661231276024,"B":-3.136978282625188,"C":-11.916672869261397},{"x":75,"A":-12.133427782329267,"B":-3.8062126153140907,"C":-13.470044473795902},{"x":76,"A":-13.083627051488554,"B":-4.924250097138202,"C":-11.961327955396664},{"x":77,"A":-13.335623067890714,"B":-6.175283123275228,"C":-11.584962903999356},{"x":78,"A":-14.419834186720982,"B":-7.286556277423363,"C":-12.295938173114461},{"x":79,"A":-15.376793649528237,"B":-7.072125805371715,"C":-11.53706380637217},{"x":80,"A":-17.548032954237105,"B":-9.67152789532152,"C":-11.54629818527125},{"x":81,"A":-17.5163731458497,"B":-8.419968911219254,"C":-11.742826547390957},{"x":82,"A":-18.467738190307113,"B":-9.52419254387961,"C":-10.029895243353915},{"x":83,"A":-19.09819889879641,"B":-8.72425321167841,"C":-8.69156762974577},{"x":84,"A":-19.748707225109598,"B":-10.467420402100343,"C":-7.2184618622729095},{"x":85,"A":-18.03117418845258,"B":-9.412963977478222,"C":-7.003940194761646},{"x":86,"A":-16.773150310467248,"B":-10.539889087053306,"C":-7.086483915562966},{"x":87,"A":-16.447411959336062,"B":-10.585157388284742,"C":-5.8481170398691145},{"x":88,"A":-18.16776055754316,"B":-10.403731074914456,"C":-5.690792638915433},{"x":89,"A":-18.504801794052533,"B":-11.171624480672696,"C":-6.893412828790885},{"x":90,"A":-19.346343032434227,"B":-11.429276752312939,"C":-5.659771815955624},{"x":91,"A":-18.03479606956385,"B":-12.470651157622946,"C":-5.945629406388116},{"x":92,"A":-17.45200163759685,"B":-11.973265733475623,"C":-5.088353407662978},{"x":93,"A":-17.94833566915189,"B":-12.65454336427322,"C":-4.2530200538236675},{"x":94,"A":-16.67840014022539,"B":-12.59421384104969,"C":-5.297719243187043},{"x":95,"A":-15.72883614213331,"B":-13.199861251945668,"C":-4.462732909752694},{"x":96,"A":-15.023879119959439,"B":-14.4007856804833,"C":-4.645526094068291},{"x":97,"A":-14.697083278016047,"B":-14.300318257958416,"C":-5.5774454581506765},{"x":98,"A":-13.919811285385533,"B":-15.010193969255788,"C":-5.532067705589329},{"x":99,"A":-16.28147947437362,"B":-15.325711315670505,"C":-4.048569066990278},{"x":100,"A":-17.078535352317896,"B":-15.8093175425004,"C":-2.761610990716092}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 20 September 2023 17:17">Wednesday 20 September 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
