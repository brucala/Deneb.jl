<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><meta name="title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="og:title" content="Scatterplot with loess lines · Deneb.jl"/><meta property="twitter:title" content="Scatterplot with loess lines · Deneb.jl"/><meta name="description" content="Documentation for Deneb.jl."/><meta property="og:description" content="Documentation for Deneb.jl."/><meta property="twitter:description" content="Documentation for Deneb.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/transitiongridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-2102299d-be5b-443e-bd0a-2eb73896b5bc.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-2102299d-be5b-443e-bd0a-2eb73896b5bc.vega-embed details,
  #vis-2102299d-be5b-443e-bd0a-2eb73896b5bc.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-2102299d-be5b-443e-bd0a-2eb73896b5bc"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-2102299d-be5b-443e-bd0a-2eb73896b5bc") {
      outputDiv = document.getElementById("vis-2102299d-be5b-443e-bd0a-2eb73896b5bc");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":0.6139813677558604,"B":-0.5708913374791657,"C":-0.8437967191776876},{"x":2,"A":0.14419718788414232,"B":-1.9468640358119123,"C":-1.997739727912217},{"x":3,"A":-0.3594383609949078,"B":-1.5446948098892377,"C":-2.8838904406972388},{"x":4,"A":0.11330008507791123,"B":-1.7444858036954578,"C":-2.0093717018600823},{"x":5,"A":-0.640082021008613,"B":-1.7337726664270323,"C":-1.7322718814132267},{"x":6,"A":-0.7766704202310329,"B":-3.6652288202392094,"C":-1.937705898930834},{"x":7,"A":-1.2732057829404249,"B":-1.8036189965524616,"C":-2.3697229334915777},{"x":8,"A":-0.8272275991246695,"B":-1.2602184688003069,"C":-0.6558763608355485},{"x":9,"A":-3.739901165909558,"B":-0.7623361957377531,"C":-0.13312235562556463},{"x":10,"A":-4.623842030584208,"B":-0.424358632969105,"C":0.3204045555258468},{"x":11,"A":-4.304749156799229,"B":-0.7708614231207876,"C":-0.8681393810294256},{"x":12,"A":-3.8561912976309474,"B":-0.22165135075826137,"C":-1.2063988900547378},{"x":13,"A":-5.44545306674753,"B":0.6758169413494101,"C":-1.993441523538623},{"x":14,"A":-4.230093847340624,"B":2.1585555998927295,"C":-1.5984740909151167},{"x":15,"A":-3.618081439026044,"B":3.0962945282363488,"C":-1.8083059314352568},{"x":16,"A":-3.790204037817051,"B":1.2941045967573803,"C":-2.459152286633068},{"x":17,"A":-4.128773970101319,"B":2.343029864820037,"C":-2.8161905705725334},{"x":18,"A":-4.01799434399476,"B":2.427225998426329,"C":-3.7610935770170286},{"x":19,"A":-4.683379680699808,"B":4.641915928672367,"C":-3.1892551253999954},{"x":20,"A":-5.582397184882418,"B":1.9407535113454752,"C":-3.3636357818830023},{"x":21,"A":-4.2184073286615735,"B":1.5378418420701991,"C":-2.2464273139451874},{"x":22,"A":-4.758269967664265,"B":1.0454518386438205,"C":-1.6130078258031446},{"x":23,"A":-4.0047466597303405,"B":1.4713662619018764,"C":-1.2844769393526776},{"x":24,"A":-2.0898089562451485,"B":0.8115490675173086,"C":0.5090487266360912},{"x":25,"A":-3.1724155238096317,"B":0.13127843237618964,"C":0.6201879525783245},{"x":26,"A":-1.3534320245087819,"B":-1.504665507190607,"C":-0.2315996992363406},{"x":27,"A":-3.565712675744372,"B":-0.02309639655889495,"C":1.426815616336966},{"x":28,"A":-3.795851706231712,"B":0.5216831893337391,"C":0.7821709859486048},{"x":29,"A":-3.1570188454745027,"B":0.3224061686194982,"C":0.732636995508515},{"x":30,"A":-4.288211572528638,"B":2.8907512061434963,"C":0.7711222098697237},{"x":31,"A":-5.614753579583162,"B":3.357739354620843,"C":1.2096884438412092},{"x":32,"A":-4.981643466165068,"B":3.66201368247506,"C":0.8305229376239975},{"x":33,"A":-6.612360846244319,"B":2.0558868650216815,"C":0.42155922098263954},{"x":34,"A":-4.182727801840496,"B":2.0515634781697356,"C":-2.044724602954405},{"x":35,"A":-4.0043552325115925,"B":1.3355359473449133,"C":-2.839776050118145},{"x":36,"A":-4.696215141251972,"B":2.1977628051073514,"C":-2.8365291272883066},{"x":37,"A":-4.509160865094326,"B":0.9765300960674487,"C":-2.4864275469587858},{"x":38,"A":-3.767190867743847,"B":0.3078622708806056,"C":-3.5979564671987143},{"x":39,"A":-4.848228215319161,"B":0.68603769104277,"C":-3.3442521447248197},{"x":40,"A":-4.345599034709165,"B":-1.0165380945640226,"C":-3.846199856907873},{"x":41,"A":-5.283273441233115,"B":-2.2723039713380278,"C":-3.9806150679878813},{"x":42,"A":-4.482681845722883,"B":-0.7111855191224409,"C":-3.6136308782058393},{"x":43,"A":-5.296597398057391,"B":-1.5765341947512863,"C":-3.242884495124639},{"x":44,"A":-6.747227997610483,"B":-0.29332062817217996,"C":-2.3534549202959623},{"x":45,"A":-6.46330878449216,"B":0.4611569301773958,"C":-0.9744112859430878},{"x":46,"A":-7.311088014881445,"B":1.322269999977689,"C":-1.4293486310824077},{"x":47,"A":-8.175537412416169,"B":0.5533944500521352,"C":0.32530340813244885},{"x":48,"A":-9.882529366627185,"B":0.07626879404481868,"C":0.0936561003537113},{"x":49,"A":-7.737898333937661,"B":0.09541053629398288,"C":1.9614124490428362},{"x":50,"A":-7.191720137824038,"B":-0.38110577624478315,"C":4.029499667260264},{"x":51,"A":-8.103929695870075,"B":0.21254117313534426,"C":3.7332697817036022},{"x":52,"A":-8.530942118040752,"B":-0.005575125536669945,"C":3.5515437354546533},{"x":53,"A":-7.327320158183539,"B":0.3354078319876085,"C":6.834333096729871},{"x":54,"A":-8.404283389072305,"B":-0.22769126387847471,"C":6.551849693818618},{"x":55,"A":-7.412201113917556,"B":0.207496243838314,"C":7.089517669049529},{"x":56,"A":-6.689434457986673,"B":0.47629765140277447,"C":8.250296938688026},{"x":57,"A":-5.906206143451379,"B":1.2388596944057748,"C":8.038092522266734},{"x":58,"A":-4.457585853135528,"B":-0.5450121581572828,"C":8.99397571658924},{"x":59,"A":-4.917711229845753,"B":-0.5422539382694948,"C":8.934849829455004},{"x":60,"A":-5.3656602354740395,"B":-1.4034755825158884,"C":8.540918656151593},{"x":61,"A":-5.339890943581278,"B":-1.9467643526255105,"C":8.908275323780039},{"x":62,"A":-5.451529253128439,"B":-2.9090644609274556,"C":6.973763435772238},{"x":63,"A":-5.22911044750627,"B":-2.7435671525926275,"C":6.250723661244291},{"x":64,"A":-6.78141482778485,"B":-4.557762462315013,"C":4.612123661726032},{"x":65,"A":-8.892494068461732,"B":-5.404168436269711,"C":4.408302093962554},{"x":66,"A":-9.093854764612688,"B":-7.1159191399710435,"C":4.881532934353597},{"x":67,"A":-9.052539694381577,"B":-7.244781368024729,"C":5.193554151324048},{"x":68,"A":-7.975983918043253,"B":-6.617195083374803,"C":4.150835409588145},{"x":69,"A":-6.461527100905679,"B":-6.991222124737189,"C":4.387381083984343},{"x":70,"A":-6.740180402083594,"B":-6.318601493605201,"C":5.261980340152219},{"x":71,"A":-5.78903369555497,"B":-5.319742320013604,"C":5.318863894208767},{"x":72,"A":-6.131370108469218,"B":-5.173133663899451,"C":6.619870885319271},{"x":73,"A":-6.372674679558084,"B":-4.812176293758673,"C":6.270826121149653},{"x":74,"A":-5.605832282405577,"B":-6.0115254799633675,"C":6.375695024658164},{"x":75,"A":-5.295355948361538,"B":-6.9989522437435765,"C":4.461669738823715},{"x":76,"A":-4.866674645678837,"B":-7.8952766579377744,"C":5.065836190361697},{"x":77,"A":-4.825528477601365,"B":-7.936486983150286,"C":5.328560642778329},{"x":78,"A":-5.816596551014034,"B":-7.060704519328894,"C":3.808397076092941},{"x":79,"A":-6.213351805889672,"B":-7.482992837794417,"C":4.67687823070976},{"x":80,"A":-7.793455762132885,"B":-8.5297185246223,"C":5.4029402429854105},{"x":81,"A":-9.965097832870402,"B":-10.46714072168788,"C":4.979255348225362},{"x":82,"A":-9.77237250530339,"B":-8.883086623482665,"C":5.156748701037034},{"x":83,"A":-9.85899473733952,"B":-8.364231691956574,"C":5.237376733448057},{"x":84,"A":-9.536824475253432,"B":-10.430226876570424,"C":5.058930932922063},{"x":85,"A":-9.812435052276488,"B":-9.683016103087688,"C":5.836436563155561},{"x":86,"A":-11.141988625115424,"B":-7.799188353622605,"C":6.028264637937405},{"x":87,"A":-11.239652224953787,"B":-9.57223153337985,"C":4.77712397837506},{"x":88,"A":-11.811818437341515,"B":-8.37159875710512,"C":5.576322637659219},{"x":89,"A":-13.990817330273158,"B":-8.870242897886257,"C":3.1182542089449923},{"x":90,"A":-14.779791962136656,"B":-7.369318326767685,"C":3.8446615355586955},{"x":91,"A":-14.008836494778961,"B":-6.667688887544983,"C":4.182284407288259},{"x":92,"A":-13.315629929434028,"B":-5.746331367014153,"C":5.1510548331461115},{"x":93,"A":-11.088787011239559,"B":-5.255117594324066,"C":5.782140569288275},{"x":94,"A":-11.819505339002436,"B":-5.270865317078064,"C":5.619000602532999},{"x":95,"A":-12.837462228476564,"B":-6.913705239006612,"C":4.974578625463956},{"x":96,"A":-13.656568011845895,"B":-7.514868738559389,"C":6.072485968124348},{"x":97,"A":-14.867893435482474,"B":-7.841184306795505,"C":4.155902117891882},{"x":98,"A":-14.558876286785688,"B":-8.043223976005677,"C":4.180949786033639},{"x":99,"A":-14.660708885324413,"B":-8.365470795449594,"C":5.565168758046977},{"x":100,"A":-15.225363308150744,"B":-8.076436502796955,"C":6.904668794661411}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/JuliaDocs/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Wednesday 11 October 2023 08:42">Wednesday 11 October 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
