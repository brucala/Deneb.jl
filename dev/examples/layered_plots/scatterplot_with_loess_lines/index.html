<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-000d6462-251a-45ff-96d5-4977e2ac66ae.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-000d6462-251a-45ff-96d5-4977e2ac66ae.vega-embed details,
  #vis-000d6462-251a-45ff-96d5-4977e2ac66ae.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-000d6462-251a-45ff-96d5-4977e2ac66ae"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-000d6462-251a-45ff-96d5-4977e2ac66ae") {
      outputDiv = document.getElementById("vis-000d6462-251a-45ff-96d5-4977e2ac66ae");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":2.103930487518815,"B":-0.893139415436959,"C":0.20639783160692504},{"x":2,"A":3.1715656720920853,"B":0.7678948343021943,"C":0.2729850601383467},{"x":3,"A":3.788805648319378,"B":0.06733253209371703,"C":0.2787507251193732},{"x":4,"A":3.3672683499985574,"B":1.3874430302571297,"C":-0.5965229527676432},{"x":5,"A":2.288349066787738,"B":-0.6119931143901551,"C":-1.2527953089828907},{"x":6,"A":2.5971233530103435,"B":-0.027481476317025688,"C":-0.03512034209824155},{"x":7,"A":3.2672673306497346,"B":0.88761486315281,"C":-0.7380889098993115},{"x":8,"A":2.7527824271473382,"B":1.1233590346410949,"C":-0.3397022030455641},{"x":9,"A":1.8571173904286669,"B":1.4406204297996281,"C":0.20982398811963643},{"x":10,"A":1.5453830719032762,"B":1.8388991311229035,"C":0.32429772042077665},{"x":11,"A":0.9997210454624295,"B":1.6696971697371505,"C":0.2436066218353406},{"x":12,"A":0.38969389766952056,"B":1.5009647591423974,"C":1.1430103540500218},{"x":13,"A":-0.008245728138027708,"B":3.275377942294444,"C":0.6900359954076798},{"x":14,"A":-1.1756519458748915,"B":1.7042430436294602,"C":1.151344206234636},{"x":15,"A":-1.7468328122472503,"B":2.3867190696721527,"C":0.7684129559046751},{"x":16,"A":-1.6980173124782292,"B":2.5351579370635644,"C":1.5320377276374588},{"x":17,"A":-1.2886171087998588,"B":1.5647155538465605,"C":1.6940352054539511},{"x":18,"A":-0.25089157121101024,"B":1.6067526717068243,"C":1.797288200178842},{"x":19,"A":-2.012872779762771,"B":3.068709035448876,"C":2.6681080879660835},{"x":20,"A":-1.840526376443529,"B":2.4586590369135273,"C":3.7667390323354306},{"x":21,"A":-2.143210921565337,"B":1.713085177555908,"C":4.089079286259249},{"x":22,"A":-2.328754881854174,"B":0.9997667527429648,"C":4.504064178649033},{"x":23,"A":-2.6133665584511605,"B":0.5522142620526969,"C":4.582876334516449},{"x":24,"A":-4.374844164189234,"B":-0.44420078080527026,"C":4.624398312299649},{"x":25,"A":-5.543591750825298,"B":-1.6501758568027878,"C":3.872108725644853},{"x":26,"A":-6.016532491564183,"B":-4.114304788360445,"C":3.9406360922451564},{"x":27,"A":-5.815761510833081,"B":-4.490175203079751,"C":2.4325783134469865},{"x":28,"A":-5.934312868880177,"B":-3.4454011435010337,"C":3.6026098292538595},{"x":29,"A":-7.4464937087130245,"B":-4.423041944018514,"C":4.300935034294014},{"x":30,"A":-8.669675831686513,"B":-2.716537224416415,"C":5.311192380727084},{"x":31,"A":-7.164758277120454,"B":-3.1967449850400387,"C":3.1162272699377085},{"x":32,"A":-7.17882065592614,"B":-3.4133840907565887,"C":2.1702316364660996},{"x":33,"A":-6.7817956894911955,"B":-2.732116633620798,"C":4.221852610162033},{"x":34,"A":-5.7531040931049375,"B":-2.7087496504701827,"C":4.9877937959824745},{"x":35,"A":-7.34332119456832,"B":-3.46701916897936,"C":3.540727809349487},{"x":36,"A":-6.584155157016237,"B":-3.777351657470902,"C":3.2545489365266387},{"x":37,"A":-5.866763148807003,"B":-3.5167868177637613,"C":2.584205195847463},{"x":38,"A":-5.528845202938161,"B":-2.6436237598254615,"C":1.0256897135102636},{"x":39,"A":-6.075751212391692,"B":-1.5758716074849755,"C":1.4668481560975613},{"x":40,"A":-4.358505952530631,"B":-2.111145310974897,"C":1.635090530291731},{"x":41,"A":-4.764099591243831,"B":-2.9788246887544227,"C":1.0306720421648818},{"x":42,"A":-4.949961939628885,"B":-2.7568735154669044,"C":1.1940974177452977},{"x":43,"A":-5.628658245692531,"B":-2.3429124322625827,"C":1.4472911428060593},{"x":44,"A":-5.235135154665903,"B":-1.5619075449999376,"C":0.6862652975667833},{"x":45,"A":-3.0077419427986922,"B":-2.1300073850660253,"C":1.6144214927757075},{"x":46,"A":-2.7171402392835824,"B":-2.613481444294698,"C":1.587076694553261},{"x":47,"A":-1.648490937392705,"B":-2.1423726209080263,"C":2.548489136816681},{"x":48,"A":-2.3487419309676514,"B":-1.498329085354433,"C":3.0105838286235596},{"x":49,"A":-2.3744903780165747,"B":0.6575136704516902,"C":2.9815640202256284},{"x":50,"A":-2.442941549856926,"B":-0.22776920739914297,"C":2.487548912317435},{"x":51,"A":-3.6065593474238633,"B":-0.938290811397162,"C":3.894852378711678},{"x":52,"A":-3.5819079895238937,"B":-0.25456897623851904,"C":4.123192433192256},{"x":53,"A":-3.0741396684996043,"B":-0.9973614756862725,"C":4.864464039748539},{"x":54,"A":-3.3975514671562324,"B":-0.6478572923432308,"C":4.5841884519172424},{"x":55,"A":-2.108255413437599,"B":-2.784150875121851,"C":4.2219407695735836},{"x":56,"A":-1.412523715474443,"B":-1.895679266710206,"C":5.342530807043255},{"x":57,"A":-1.9595037788408658,"B":-3.001576991283776,"C":4.387416966527704},{"x":58,"A":-1.0579874852690025,"B":-1.6347516835452172,"C":4.875094448230575},{"x":59,"A":-1.5727133378560119,"B":-2.8284696963894795,"C":3.605305701689504},{"x":60,"A":-3.0458280372679076,"B":-4.010183386630387,"C":2.2286164124474017},{"x":61,"A":-0.9946067997486114,"B":-3.582804144089307,"C":1.9312429211092832},{"x":62,"A":-2.9149681768717186,"B":-2.2349406675496515,"C":1.272636319661352},{"x":63,"A":-3.7143552532800084,"B":-3.0591812157804474,"C":0.7947526498230223},{"x":64,"A":-3.3091044173068416,"B":-3.5506457092266723,"C":0.33883241805334535},{"x":65,"A":-4.232150538157503,"B":-4.919389130061077,"C":-0.03500620620794037},{"x":66,"A":-4.971528460137879,"B":-2.687341219578573,"C":0.6264194657966689},{"x":67,"A":-4.6120765937136525,"B":-1.3485504690920769,"C":0.8042350964995466},{"x":68,"A":-6.110139276538037,"B":-2.6718760838726623,"C":1.2243707221582254},{"x":69,"A":-6.919149372544284,"B":-3.0020490045094554,"C":0.6117338528049469},{"x":70,"A":-7.9851143210935085,"B":-3.322863520743459,"C":0.3218264304682644},{"x":71,"A":-6.516671410017464,"B":-1.973365973772072,"C":2.358455709399087},{"x":72,"A":-6.065736694017545,"B":-0.8773624144903294,"C":0.5822591156146311},{"x":73,"A":-5.798055875483479,"B":-0.8862008350782677,"C":1.3858996425279897},{"x":74,"A":-6.041210882685837,"B":-1.739418637632497,"C":0.44698080621234326},{"x":75,"A":-6.0083030060922535,"B":-0.7369354750296551,"C":0.13590941078428342},{"x":76,"A":-4.692119943578572,"B":-0.5580959647197309,"C":-0.04070599527080382},{"x":77,"A":-6.05204914590694,"B":0.8902417134572109,"C":0.5578100803852628},{"x":78,"A":-7.7202535722339025,"B":-1.1332602597411754,"C":0.8772572552908733},{"x":79,"A":-7.4102197732074035,"B":-3.0452072297642374,"C":-0.1383513055053016},{"x":80,"A":-7.654690114237596,"B":-3.4952392834502106,"C":0.49398318431815225},{"x":81,"A":-6.812734081151978,"B":-2.8472118668724256,"C":0.31056646845185},{"x":82,"A":-6.0213559148040225,"B":-2.8656109020204483,"C":0.028456965229150838},{"x":83,"A":-5.41675973704243,"B":-1.6321421332540924,"C":1.142445454076299},{"x":84,"A":-5.7595802922993595,"B":-1.908136834171848,"C":1.2774365608729168},{"x":85,"A":-4.185825918241976,"B":-0.08946825376987033,"C":2.2097527447332026},{"x":86,"A":-4.150797111131114,"B":2.021753140015641,"C":0.8906894736605908},{"x":87,"A":-3.1786886170188278,"B":1.5736754764194363,"C":0.8733313443075592},{"x":88,"A":-2.930523531893041,"B":-0.06278096289756507,"C":1.1945150670279339},{"x":89,"A":-2.8381831779582956,"B":0.38848629523411615,"C":2.247232971361841},{"x":90,"A":-3.516009624283274,"B":0.119746956574309,"C":2.265021979595483},{"x":91,"A":-3.348047501172077,"B":0.9108528216851222,"C":2.6156074807715313},{"x":92,"A":-2.716347238156873,"B":-0.2962968889448996,"C":2.749981873954489},{"x":93,"A":-2.102829898673668,"B":-0.1559218897157617,"C":2.993685078542477},{"x":94,"A":0.43146563767781476,"B":-0.2343104803416547,"C":3.4446845978096294},{"x":95,"A":1.1131306470401012,"B":-0.26774646463423235,"C":4.53833158153269},{"x":96,"A":1.1347144402315905,"B":2.1248036147261056,"C":5.175270105430856},{"x":97,"A":0.9532767413512613,"B":2.8888137537711707,"C":5.805931475405478},{"x":98,"A":0.8860083062109589,"B":3.420283070450431,"C":5.078492887953399},{"x":99,"A":0.8028064359463174,"B":2.081201200023089,"C":6.226947252374924},{"x":100,"A":1.1922822442768646,"B":3.1820156564310267,"C":6.536350901327431}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 11 August 2023 08:38">Friday 11 August 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
