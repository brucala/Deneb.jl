<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scatterplot with loess lines · Deneb.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="Deneb.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Deneb.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../../installation/">Installation</a></li><li><a class="tocitem" href="../../../basic_tutorial/">Basic Tutorial</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../../intro/">Introduction</a></li><li><a class="tocitem" href="../../../data_mark_encoding/">Data, Mark and Encoding</a></li><li><a class="tocitem" href="../../../composition_and_layering/">Composition and Layering</a></li><li><a class="tocitem" href="../../../multiview/">Multi-views</a></li><li><a class="tocitem" href="../../../interactive/">Interactive Charts</a></li><li><a class="tocitem" href="../../../transformations/">Data Transformations</a></li><li><a class="tocitem" href="../../../themes/">Themes</a></li></ul></li><li><a class="tocitem" href="../../">Gallery</a></li><li><a class="tocitem" href="../../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scatterplot with loess lines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brucala/Deneb.jl/blob/main/docs/examples/layered_plots/scatterplot_with_loess_lines.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scatterplot-with-loess-lines"><a class="docs-heading-anchor" href="#Scatterplot-with-loess-lines">Scatterplot with loess lines</a><a id="Scatterplot-with-loess-lines-1"></a><a class="docs-heading-anchor-permalink" href="#Scatterplot-with-loess-lines" title="Permalink"></a></h1><p><a href="../scatterplot_with_loess_lines.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-bruno-blue" alt="Author"/></p><pre><code class="language-julia hljs">using Deneb

data = (
    x=1:100,
    A=cumsum(randn(100)),
    B=cumsum(randn(100)),
    C=cumsum(randn(100)),
)

base = Data(data) * transform_fold(
    [:A, :B, :C],
    as=(:category, :y),
) * Encoding(&quot;x:Q&quot;, &quot;y:Q&quot;, color=:category)

points = Mark(:circle, opacity=0.4)

lines = Mark(:line, size=4) * transform_loess(
    :x, :y, groupby=:category
)

chart = base * (points + lines) * vlspec(width=400)</code></pre><style>
  #vis-6b13cd13-b69a-452c-a6af-baa29df4be77.vega-embed {
    width: 100%;
    display: flex;
  }

  #vis-6b13cd13-b69a-452c-a6af-baa29df4be77.vega-embed details,
  #vis-6b13cd13-b69a-452c-a6af-baa29df4be77.vega-embed details summary {
    position: relative;
  }
</style>
<div id="vis-6b13cd13-b69a-452c-a6af-baa29df4be77"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "vis-6b13cd13-b69a-452c-a6af-baa29df4be77") {
      outputDiv = document.getElementById("vis-6b13cd13-b69a-452c-a6af-baa29df4be77");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config":{"view":{"continuousWidth":300,"continuousHeight":300,"step":25},"mark":{"tooltip":true}},"transform":[{"fold":["A","B","C"],"as":["category","y"]}],"data":{"values":[{"x":1,"A":-0.33607712249729665,"B":1.412159081479582,"C":-0.579482949793184},{"x":2,"A":0.007305257995952663,"B":2.819982938043145,"C":-0.08372025462185606},{"x":3,"A":-0.728506746141421,"B":1.4099898781050146,"C":-0.3693081874486108},{"x":4,"A":-2.171018880809956,"B":1.035284355871647,"C":-1.2041478020593102},{"x":5,"A":0.6861752197671929,"B":0.7287202856471895,"C":-1.0391000618872361},{"x":6,"A":0.6213949291169121,"B":-0.41427467773362814,"C":0.5803017657128372},{"x":7,"A":0.34251380487919675,"B":0.17914723852676384,"C":0.6070200067644814},{"x":8,"A":0.4529409204692996,"B":0.4762590996844325,"C":1.1219262604675717},{"x":9,"A":1.8891729142525633,"B":1.999759971161356,"C":-0.061454653011196014},{"x":10,"A":0.9474627357497294,"B":0.8352081183117415,"C":0.17707429863093982},{"x":11,"A":1.0324736731084048,"B":0.28572479800921724,"C":1.7029176853161934},{"x":12,"A":1.739351921165194,"B":0.1788028271608264,"C":1.7111598045904826},{"x":13,"A":5.4994934155243405,"B":-1.1281505126003817,"C":3.152005740680826},{"x":14,"A":6.179535093594167,"B":-1.6152596955191985,"C":4.00092287980604},{"x":15,"A":6.385958791801754,"B":-1.873452803495791,"C":4.426621135561723},{"x":16,"A":4.801727700098056,"B":-2.03119113847922,"C":3.706140989649896},{"x":17,"A":4.467559083525794,"B":-1.6446399960895939,"C":4.387394203469608},{"x":18,"A":5.018555233293472,"B":-2.456751764001355,"C":5.655080747131734},{"x":19,"A":3.043563102672645,"B":-2.743568381936739,"C":4.746796268341371},{"x":20,"A":2.588676981450749,"B":-2.803050633492801,"C":5.015265122757421},{"x":21,"A":2.4308751347909,"B":-2.68057669430332,"C":3.342059345749771},{"x":22,"A":3.5927581458471116,"B":-3.8782319384939274,"C":2.8147915106564714},{"x":23,"A":3.793562349122769,"B":-4.063547621475543,"C":0.5747865101199411},{"x":24,"A":4.082744430128548,"B":-4.865042917049892,"C":0.25426540992743163},{"x":25,"A":4.134130725745332,"B":-3.6839561035046513,"C":0.6331327210862426},{"x":26,"A":4.219152423108447,"B":-4.011353385946497,"C":-0.28915885834081023},{"x":27,"A":3.9364368308167195,"B":-5.134807360416099,"C":-0.06541699146312085},{"x":28,"A":2.8227507388729958,"B":-6.479017149974704,"C":0.47343850166553436},{"x":29,"A":3.415266527151687,"B":-7.315621332309749,"C":-1.23047810976567},{"x":30,"A":4.409051045251613,"B":-7.045794902777639,"C":-0.5019892195122976},{"x":31,"A":4.444869849256898,"B":-8.578329097461808,"C":-0.585300260069634},{"x":32,"A":3.399857003242263,"B":-9.214135470328264,"C":-0.10123265926293601},{"x":33,"A":2.73477427799253,"B":-9.57366199785732,"C":-1.894013862227221},{"x":34,"A":1.7228034333582003,"B":-8.354271305120148,"C":-0.9066797767486343},{"x":35,"A":2.8943908348029566,"B":-7.958752579151445,"C":-1.087228425583017},{"x":36,"A":1.4062788941682534,"B":-8.96236982354583,"C":-2.319959189008205},{"x":37,"A":1.4673710789375485,"B":-8.92414967277612,"C":-1.366069648699783},{"x":38,"A":0.9130441700064988,"B":-8.57494553337654,"C":-0.5630605646960117},{"x":39,"A":1.7525968292263774,"B":-8.47821961527684,"C":0.18611942842070395},{"x":40,"A":2.3111680803429278,"B":-7.6864684467125395,"C":-0.7156802406030078},{"x":41,"A":1.4060669714549012,"B":-8.161802527918448,"C":-0.2936014789583189},{"x":42,"A":4.0514112066253585,"B":-8.054975898417334,"C":0.03403825126262572},{"x":43,"A":4.682407417057237,"B":-7.077226244853928,"C":1.8480380039612472},{"x":44,"A":3.335876846212515,"B":-7.056809903658809,"C":2.889100857029617},{"x":45,"A":5.034572001237763,"B":-6.607337577770049,"C":1.3323251956595308},{"x":46,"A":4.247774675017107,"B":-6.83167043399165,"C":2.2693566715191773},{"x":47,"A":3.5069116712052586,"B":-6.4900900942895845,"C":2.0778863263436027},{"x":48,"A":4.886324232380129,"B":-5.681995858120861,"C":1.2232644737425034},{"x":49,"A":3.6216988877619913,"B":-6.3148839003306465,"C":1.7166749899243525},{"x":50,"A":4.23020236203075,"B":-6.531379225942667,"C":1.262139640673972},{"x":51,"A":3.435794130515694,"B":-6.520998675331315,"C":-0.6958452079375598},{"x":52,"A":4.426075329662759,"B":-6.269741151225361,"C":-0.5790844317653003},{"x":53,"A":4.376024207738455,"B":-6.888971507709534,"C":1.2079347652937291},{"x":54,"A":2.8314564768626584,"B":-6.6594821832378175,"C":2.911387834722436},{"x":55,"A":3.2688904846716746,"B":-7.665796686209309,"C":3.4015911296980272},{"x":56,"A":3.8527660581252605,"B":-8.512801141411082,"C":2.9438005262929847},{"x":57,"A":2.5222495804488467,"B":-11.438166098304402,"C":2.0586777762772384},{"x":58,"A":2.376167595567151,"B":-9.936424471874892,"C":2.3696985087204934},{"x":59,"A":2.973738293738165,"B":-10.148561047075795,"C":1.49665322733778},{"x":60,"A":2.9941271209743068,"B":-9.33656234436715,"C":0.40746635298849},{"x":61,"A":2.819286829063467,"B":-10.32123861645453,"C":-0.8033527367505359},{"x":62,"A":2.954652385953066,"B":-11.329012410318652,"C":-0.6014856763481742},{"x":63,"A":2.586054571178811,"B":-9.69846242319553,"C":1.3978908187917471},{"x":64,"A":3.0241980215992825,"B":-9.651647914242423,"C":-0.17074064216952134},{"x":65,"A":4.0308553091934565,"B":-9.421926385009414,"C":0.2775058902681332},{"x":66,"A":3.341650579025667,"B":-10.528107174042017,"C":0.8700503208892664},{"x":67,"A":2.1050822113564496,"B":-9.069722015213069,"C":1.5395194138458357},{"x":68,"A":2.1289921191286028,"B":-10.864963958672982,"C":2.2465870359454105},{"x":69,"A":3.157259432078024,"B":-11.442413971581216,"C":1.4995321340388532},{"x":70,"A":3.268505299654933,"B":-12.569963219259549,"C":1.5026281421930041},{"x":71,"A":1.5992736537047674,"B":-11.63746430315288,"C":-0.637026796507777},{"x":72,"A":4.516846511532528,"B":-13.04108409229911,"C":-1.8087288215358597},{"x":73,"A":6.602707656856473,"B":-13.283713173417729,"C":-2.316684062996017},{"x":74,"A":4.386047605370515,"B":-13.413533432944023,"C":-0.10864085387912314},{"x":75,"A":3.43654860278748,"B":-12.873439192236432,"C":0.6785257989531629},{"x":76,"A":2.585316246297258,"B":-12.636807196012919,"C":0.13586352082677322},{"x":77,"A":1.5905500378237336,"B":-11.169456018522135,"C":-0.36965897163784167},{"x":78,"A":1.7075943315061601,"B":-9.83703254596662,"C":-0.47548825611297296},{"x":79,"A":1.0040864757722454,"B":-9.23572045065948,"C":-1.1664343566218263},{"x":80,"A":1.26077005893851,"B":-10.670944526428512,"C":-1.9289293109694707},{"x":81,"A":1.347978686468234,"B":-11.502252799178075,"C":-2.2976503889396422},{"x":82,"A":1.8179368224017147,"B":-10.630625962563645,"C":-1.4043871676239432},{"x":83,"A":0.4455691230888584,"B":-10.24342882845461,"C":-0.4406701137200937},{"x":84,"A":0.34059196328140523,"B":-10.592467347874088,"C":-0.6339680760307718},{"x":85,"A":1.184357074334033,"B":-13.138995500929719,"C":-0.0008928926120964631},{"x":86,"A":1.5517777280165457,"B":-12.550136598636433,"C":-0.48674132047468555},{"x":87,"A":0.35167713003259343,"B":-13.385356358306383,"C":0.15519563821255034},{"x":88,"A":0.7206731729670399,"B":-12.023611759338555,"C":0.8365794307240183},{"x":89,"A":0.9558413442714289,"B":-11.013344390895513,"C":1.8247251431137808},{"x":90,"A":0.34073300680755686,"B":-9.46509189796131,"C":1.2635746481233068},{"x":91,"A":-1.7870649464687682,"B":-9.434004127372269,"C":0.8963322422800185},{"x":92,"A":-2.462038636886125,"B":-10.308396084194053,"C":0.39009380960064977},{"x":93,"A":-4.2277470720242585,"B":-9.90351519922498,"C":0.3737562699199801},{"x":94,"A":-4.254415245042808,"B":-8.80635516468445,"C":0.5684567148853908},{"x":95,"A":-4.396207443145275,"B":-9.203623437533576,"C":-1.6317017637220137},{"x":96,"A":-3.1572153035439823,"B":-10.868565717727567,"C":-0.9707678258547965},{"x":97,"A":-2.7577776073815246,"B":-9.938310441978274,"C":-1.004863269985849},{"x":98,"A":-0.8754241776748131,"B":-10.215400434864508,"C":-0.9904802551073866},{"x":99,"A":-0.3210092989963618,"B":-10.663900974813378,"C":-0.4637267874934931},{"x":100,"A":-0.27651745039596726,"B":-11.295332161019418,"C":-2.618201985186504}]},"encoding":{"color":{"field":"category"},"x":{"field":"x","type":"quantitative"},"y":{"field":"y","type":"quantitative"}},"layer":[{"mark":{"type":"circle","opacity":0.4},"width":400},{"transform":[{"loess":"y","on":"x","groupby":["category"]}],"mark":{"type":"line","size":4},"width":400}]}, {"mode": "vega-lite"});
</script>
<hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 20 September 2023 17:44">Wednesday 20 September 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
